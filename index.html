<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  
  
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://example.com/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/images/default-avatar.jpg">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

  
<link rel="stylesheet" href="/css/highlight.css">

<meta name="generator" content="Hexo 6.3.0"></head>

<body>
  <div id="fullpage" class="mobile-nav-right">
    
      <div id="wrapper" title="图片来自网络">
    
    
      <header id="header">
  <div id="nav-toggle" class="nav-toggle"></div>
  <div class="head-box global-width">
    <nav class="nav-box nav-right">
      
        <a class="nav-item" href="/" title
        
        >首页</a>
      
        <a class="nav-item" href="/archives" title
        
        >归档</a>
      
    </nav>
  </div>
</header>
      <div id="middlecontent" title class="global-width sidebar-right">
        <section id="main">
  
    <article id="post-手Q二面" class="article global-container article-type-post" itemscope itemprop="blogPost">
  
    <header class="article-header">
      
  
    <h1 itemprop="name">
      <a class="article-title" href="/2023/04/24/%E6%89%8BQ%E4%BA%8C%E9%9D%A2/">鹅的鹅的二面</a>
    </h1>
  

    </header>
  
  <div class="article-meta">
    <a href="/2023/04/24/%E6%89%8BQ%E4%BA%8C%E9%9D%A2/" class="article-date">
  <time datetime="2023-04-24T12:33:02.234Z" itemprop="datePublished">2023-04-24</time>
</a>
    
    
  </div>
  

  <div class="article-inner">
    
    <div class="article-content article-content-cloud" itemprop="articleBody">
      
        <h1 id="手Q二面"><a href="#手Q二面" class="headerlink" title="手Q二面"></a>手Q二面</h1><p>面试不太舒服, 面试官冷冰冰的</p>
<ul>
<li>个人介绍</li>
<li>实习过程中学到了什么</li>
<li>遇到了什么难点</li>
<li>遇到的bug</li>
<li>有无了解最近的什么新技术<ul>
<li>我: ?</li>
</ul>
</li>
<li>项目组用到了什么新技术<ul>
<li>我: ? flutter算吗</li>
</ul>
</li>
<li>优化的问题</li>
</ul>
<p><strong>算法题</strong></p>
<p>面试官: 给一百万个数, 输出最大的一百个</p>
<p>我秒答: 优先队列</p>
<p>面试官: 写一个优先队列</p>
<p>我: 不会</p>
<p>面试官: 用数组实现</p>
<p>我: 时间复杂度超了</p>
<p>面试官: 写就行</p>
<p>coding</p>

      
    </div>
    
  </div>
  
  
</article>

  
    <article id="post-QuickSort" class="article global-container article-type-post" itemscope itemprop="blogPost">
  
    <header class="article-header">
      
  
    <h1 itemprop="name">
      <a class="article-title" href="/2023/04/24/QuickSort/">快速排序模版</a>
    </h1>
  

    </header>
  
  <div class="article-meta">
    <a href="/2023/04/24/QuickSort/" class="article-date">
  <time datetime="2023-04-24T12:32:18.516Z" itemprop="datePublished">2023-04-24</time>
</a>
    
    
  </div>
  

  <div class="article-inner">
    
    <div class="article-content article-content-cloud" itemprop="articleBody">
      
        <p><strong>Code</strong></p>
<div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">QuickSort</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span>[] nums = <span class="keyword">new</span> <span class="title class_">int</span>[]&#123;<span class="number">50</span>, <span class="number">42</span>, <span class="number">5</span>, <span class="number">712</span>, <span class="number">65</span>, <span class="number">78</span>, <span class="number">9</span>, <span class="number">123</span>, <span class="number">124</span>, <span class="number">5</span>, <span class="number">546</span>, <span class="number">24</span>&#125;;</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">QuickSort</span>().quickSort(nums, <span class="number">0</span>, nums.length - <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">partition</span><span class="params">(<span class="type">int</span>[] array, <span class="type">int</span> low, <span class="type">int</span> high)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">pivot</span> <span class="operator">=</span> array[high];</span><br><span class="line">        <span class="type">int</span> <span class="variable">pointer</span> <span class="operator">=</span> low;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> low; i &lt; high; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (array[i] &lt;= pivot) &#123;</span><br><span class="line">                <span class="type">int</span> <span class="variable">temp</span> <span class="operator">=</span> array[i];</span><br><span class="line">                array[i] = array[pointer];</span><br><span class="line">                array[pointer] = temp;</span><br><span class="line">                pointer++;</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(Arrays.toString(array));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> <span class="variable">temp</span> <span class="operator">=</span> array[pointer];</span><br><span class="line">        array[pointer] = array[high];</span><br><span class="line">        array[high] = temp;</span><br><span class="line">        System.out.println();</span><br><span class="line">        <span class="keyword">return</span> pointer;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">quickSort</span><span class="params">(<span class="type">int</span>[] array, <span class="type">int</span> low, <span class="type">int</span> high)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (low &lt; high) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">position</span> <span class="operator">=</span> partition(array, low, high);</span><br><span class="line">            quickSort(array, low, position - <span class="number">1</span>);</span><br><span class="line">            quickSort(array, position + <span class="number">1</span>, high);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></div>



<p><strong>Output</strong></p>
<div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAINTEXT"><figure class="iseeu highlight /plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">[50, 42, 5, 712, 65, 78, 9, 123, 124, 5, 546, 24]</span><br><span class="line">[50, 42, 5, 712, 65, 78, 9, 123, 124, 5, 546, 24]</span><br><span class="line">[5, 42, 50, 712, 65, 78, 9, 123, 124, 5, 546, 24]</span><br><span class="line">[5, 42, 50, 712, 65, 78, 9, 123, 124, 5, 546, 24]</span><br><span class="line">[5, 42, 50, 712, 65, 78, 9, 123, 124, 5, 546, 24]</span><br><span class="line">[5, 42, 50, 712, 65, 78, 9, 123, 124, 5, 546, 24]</span><br><span class="line">[5, 9, 50, 712, 65, 78, 42, 123, 124, 5, 546, 24]</span><br><span class="line">[5, 9, 50, 712, 65, 78, 42, 123, 124, 5, 546, 24]</span><br><span class="line">[5, 9, 50, 712, 65, 78, 42, 123, 124, 5, 546, 24]</span><br><span class="line">[5, 9, 5, 712, 65, 78, 42, 123, 124, 50, 546, 24]</span><br><span class="line">[5, 9, 5, 712, 65, 78, 42, 123, 124, 50, 546, 24]</span><br><span class="line"></span><br><span class="line">[5, 9, 5, 24, 65, 78, 42, 123, 124, 50, 546, 712]</span><br><span class="line">[5, 9, 5, 24, 65, 78, 42, 123, 124, 50, 546, 712]</span><br><span class="line"></span><br><span class="line">[5, 5, 9, 24, 65, 78, 42, 123, 124, 50, 546, 712]</span><br><span class="line">[5, 5, 9, 24, 65, 78, 42, 123, 124, 50, 546, 712]</span><br><span class="line">[5, 5, 9, 24, 65, 78, 42, 123, 124, 50, 546, 712]</span><br><span class="line">[5, 5, 9, 24, 65, 78, 42, 123, 124, 50, 546, 712]</span><br><span class="line">[5, 5, 9, 24, 65, 78, 42, 123, 124, 50, 546, 712]</span><br><span class="line">[5, 5, 9, 24, 65, 78, 42, 123, 124, 50, 546, 712]</span><br><span class="line">[5, 5, 9, 24, 65, 78, 42, 123, 124, 50, 546, 712]</span><br><span class="line"></span><br><span class="line">[5, 5, 9, 24, 65, 78, 42, 123, 124, 50, 546, 712]</span><br><span class="line">[5, 5, 9, 24, 65, 78, 42, 123, 124, 50, 546, 712]</span><br><span class="line">[5, 5, 9, 24, 65, 78, 42, 123, 124, 50, 546, 712]</span><br><span class="line">[5, 5, 9, 24, 65, 78, 42, 123, 124, 50, 546, 712]</span><br><span class="line">[5, 5, 9, 24, 65, 78, 42, 123, 124, 50, 546, 712]</span><br><span class="line">[5, 5, 9, 24, 65, 78, 42, 123, 124, 50, 546, 712]</span><br><span class="line"></span><br><span class="line">[5, 5, 9, 24, 65, 78, 42, 123, 124, 50, 546, 712]</span><br><span class="line">[5, 5, 9, 24, 65, 78, 42, 123, 124, 50, 546, 712]</span><br><span class="line">[5, 5, 9, 24, 42, 78, 65, 123, 124, 50, 546, 712]</span><br><span class="line">[5, 5, 9, 24, 42, 78, 65, 123, 124, 50, 546, 712]</span><br><span class="line">[5, 5, 9, 24, 42, 78, 65, 123, 124, 50, 546, 712]</span><br><span class="line"></span><br><span class="line">[5, 5, 9, 24, 42, 50, 65, 123, 124, 78, 546, 712]</span><br><span class="line">[5, 5, 9, 24, 42, 50, 65, 123, 124, 78, 546, 712]</span><br><span class="line">[5, 5, 9, 24, 42, 50, 65, 123, 124, 78, 546, 712]</span><br><span class="line"></span><br><span class="line">[5, 5, 9, 24, 42, 50, 65, 78, 124, 123, 546, 712]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">进程已结束,退出代码0</span><br><span class="line"></span><br></pre></td></tr></table></figure></div>


      
    </div>
    
  </div>
  
  
</article>

  
    <article id="post-操作系统" class="article global-container article-type-post" itemscope itemprop="blogPost">
  
    <header class="article-header">
      
  
    <h1 itemprop="name">
      <a class="article-title" href="/2023/04/24/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/">面试相关的操作系统题目</a>
    </h1>
  

    </header>
  
  <div class="article-meta">
    <a href="/2023/04/24/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" class="article-date">
  <time datetime="2023-04-24T12:30:51.518Z" itemprop="datePublished">2023-04-24</time>
</a>
    
    
  </div>
  

  <div class="article-inner">
    
    <div class="article-content article-content-cloud" itemprop="articleBody">
      
        <h1 id="面试相关的操作系统题目"><a href="#面试相关的操作系统题目" class="headerlink" title="面试相关的操作系统题目"></a>面试相关的操作系统题目</h1><h2 id="虚拟内存"><a href="#虚拟内存" class="headerlink" title="虚拟内存"></a>虚拟内存</h2><p><strong>虚拟内存</strong>是计算机系统内存管理的一种技术。它使得应用程序认为它拥有连续可用的内存（一个连续完整的地址空间），而实际上<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E7%89%A9%E7%90%86%E5%86%85%E5%AD%98">物理内存</a>通常被分隔成多个<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E7%A2%8E%E7%89%87%E5%8C%96">内存碎片</a>，还有部分暂时存储在外部磁盘存储器上，在需要时进行数据交换。</p>
<p>对虚拟内存的定义是基于对<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E5%9C%B0%E5%9D%80%E7%A9%BA%E9%97%B4">地址空间</a>的重定义的，即把地址空间定义为“连续的虚拟内存地址”，以借此“欺骗”程序，使它们以为自己正在使用一大块的“连续”地址。</p>
<h2 id="死锁"><a href="#死锁" class="headerlink" title="死锁"></a>死锁</h2><h3 id="产生死锁的四个必要条件："><a href="#产生死锁的四个必要条件：" class="headerlink" title="产生死锁的四个必要条件："></a>产生死锁的四个必要条件：</h3><p>（1） 互斥条件：一个资源每次只能被一个进程使用。</p>
<p>（2） 请求与保持条件：一个进程因请求资源而阻塞时，对已获得的资源保持不放。</p>
<p>（3） 不剥夺条件:进程已获得的资源，在末使用完之前，不能强行剥夺。</p>
<p>（4） 循环等待条件:若干进程之间形成一种头尾相接的循环等待资源关系。</p>
<p>这四个条件是死锁的必要条件，只要系统发生死锁，这些条件必然成立，而只要上述条件之</p>
<p>一不满足，就不会发生死锁。</p>
<h3 id="预防死锁"><a href="#预防死锁" class="headerlink" title="预防死锁"></a>预防死锁</h3><p>通过破坏四个必要条件中的一个或多个，使死锁永远无法满足。实现简单，但是由于所施加的限制条件往往太严格，可能会导致系统资源利用率和系统吞吐量降低。</p>
<h4 id="预先资源分配法"><a href="#预先资源分配法" class="headerlink" title="预先资源分配法"></a>预先资源分配法</h4><p>一次性申请所有需要的资源，只要有一种资源不满足要求，哪怕其它需要的资源都足够，也不做任何分配。这样一来就没有“保持”资源的状态，只有“请求”资源的状态，破坏了请求与保持条件。</p>
<h4 id="有序资源分配法"><a href="#有序资源分配法" class="headerlink" title="有序资源分配法"></a>有序资源分配法</h4><p>在申请不同类资源时，必须按指定顺序申请，破坏了环路等待条件。</p>
<ul>
<li>正例：线程A、B申请资源顺序均为R1-&gt;R2；</li>
<li>反例：A申请顺序为R1-&gt;R2，B申请顺序为R2-&gt;R1。</li>
</ul>
<h3 id="避免死锁"><a href="#避免死锁" class="headerlink" title="避免死锁"></a>避免死锁</h3><p>也是预发死锁，但不会事先去破坏死锁的必要条件，只是有人请求资源时，用某种方法防止系统进入不安全的状态（死锁），从而避免发生死锁。</p>
<h4 id="银行家算法"><a href="#银行家算法" class="headerlink" title="银行家算法"></a>银行家算法</h4><p>基本思想是分配资源之前，判断系统是否是安全的；若是，才分配。</p>
<h3 id="检测死锁和解除"><a href="#检测死锁和解除" class="headerlink" title="检测死锁和解除"></a>检测死锁和解除</h3><p>不采取措施防止死锁产生，允许系统产生死锁，但是可以通过一些手段检测出死锁，然后将死锁解除。</p>
<p>检测方法：</p>
<ol>
<li>定时检测</li>
<li>效率低时检测</li>
<li>进程等待时检测</li>
</ol>
<h2 id="进程和线程的区别"><a href="#进程和线程的区别" class="headerlink" title="进程和线程的区别"></a>进程和线程的区别</h2><ul>
<li><strong>本质区别</strong>：进程是操作系统资源分配的基本单位，而线程是任务调度和执行的基本单位</li>
<li><strong>在开销方面</strong>：每个进程都有独立的代码和数据空间（程序上下文），程序之间的切换会有较大的开销；线程可以看做轻量级的进程，同一类线程共享代码和数据空间，每个线程都有自己独立的运行栈和程序计数器（PC），线程之间切换的开销小</li>
<li><strong>所处环境</strong>：在操作系统中能同时运行多个进程（程序）；而在同一个进程（程序）中有多个线程同时执行（通过CPU调度，在每个时间片中只有一个线程执行）</li>
<li><strong>内存分配方面</strong>：系统在运行的时候会为每个进程分配不同的内存空间；而对线程而言，除了CPU外，系统不会为线程分配内存（线程所使用的资源来自其所属进程的资源），线程组之间只能共享资源</li>
<li><strong>包含关系</strong>：没有线程的进程可以看做是单线程的，如果一个进程内有多个线程，则执行过程不是一条线的，而是多条线（线程）共同完成的；线程是进程的一部分，所以线程也被称为轻权进程或者轻量级进程</li>
</ul>
<p>举个例子：进程&#x3D;火车，线程&#x3D;车厢</p>
<ul>
<li>线程在进程下行进（单纯的车厢无法运行）</li>
<li>一个进程可以包含多个线程（一辆火车可以有多个车厢）</li>
<li>不同进程间数据很难共享（一辆火车上的乘客很难换到另外一辆火车，比如站点换乘）</li>
<li>同一进程下不同线程间数据很易共享（A车厢换到B车厢很容易）</li>
<li>进程要比线程消耗更多的计算机资源（采用多列火车相比多个车厢更耗资源）</li>
<li>进程间不会相互影响，一个线程挂掉将导致整个进程挂掉（一列火车不会影响到另外一列火车，但是如果一列火车上中间的一节车厢着火了，将影响到所有车厢）</li>
</ul>

      
    </div>
    
  </div>
  
  
</article>

  
    <article id="post-Handler机制" class="article global-container article-type-post" itemscope itemprop="blogPost">
  
    <header class="article-header">
      
  
    <h1 itemprop="name">
      <a class="article-title" href="/2023/04/24/Handler%E6%9C%BA%E5%88%B6/">关于handler机制</a>
    </h1>
  

    </header>
  
  <div class="article-meta">
    <a href="/2023/04/24/Handler%E6%9C%BA%E5%88%B6/" class="article-date">
  <time datetime="2023-04-24T12:30:51.515Z" itemprop="datePublished">2023-04-24</time>
</a>
    
    
  </div>
  

  <div class="article-inner">
    
    <div class="article-content article-content-cloud" itemprop="articleBody">
      
        <h2 id="简述Handler机制"><a href="#简述Handler机制" class="headerlink" title="简述Handler机制"></a>简述Handler机制</h2><p>Handler机制内部有三大关键角色：Handler，Looper，MessageQueue。其中MessageQueue是Looper内部的一个对象，MessageQueue和Looper每个线程有且只有一个，而Handler是可以有很多个的。他们的工作流程是：</p>
<ol>
<li>用户使用线程的Looper构建Handler之后，通过Handler的send和post方法发送消息</li>
<li>消息会加入到MessageQueue中，等待Looper获取处理</li>
<li>Looper会不断地从MessageQueue中获取Message然后交付给对应的Handler处理</li>
</ol>
<h2 id="相关源码分析"><a href="#相关源码分析" class="headerlink" title="相关源码分析"></a>相关源码分析</h2><h3 id="ThreadLocal"><a href="#ThreadLocal" class="headerlink" title="ThreadLocal"></a>ThreadLocal</h3><blockquote>
<p>This gives us the ability to store data individually for the current thread and simply wrap it within a special type of object.</p>
</blockquote>
<p>尝试翻译：ThreadLocal给我们一种为当前的线程独立存储数据的能力，并将数据简单封装为对象</p>
<p>其原理在于不同的Thread内维护了各自的map，所以线程有自己独立的数据</p>
<div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">public</span> T <span class="title function_">get</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">// 获取当前线程 </span></span><br><span class="line">    <span class="type">Thread</span> <span class="variable">t</span> <span class="operator">=</span> Thread.currentThread();</span><br><span class="line">    </span><br><span class="line">   	<span class="comment">// 获取线程中的ThreadLocalMap</span></span><br><span class="line">    <span class="type">ThreadLocalMap</span> <span class="variable">map</span> <span class="operator">=</span> getMap(t);</span><br><span class="line">    <span class="keyword">if</span> (map != <span class="literal">null</span>) &#123;</span><br><span class="line">        ThreadLocalMap.<span class="type">Entry</span> <span class="variable">e</span> <span class="operator">=</span> map.getEntry(<span class="built_in">this</span>);</span><br><span class="line">        <span class="keyword">if</span> (e != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="meta">@SuppressWarnings(&quot;unchecked&quot;)</span></span><br><span class="line">            <span class="type">T</span> <span class="variable">result</span> <span class="operator">=</span> (T)e.value;</span><br><span class="line">            <span class="keyword">return</span> result;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> setInitialValue();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">set</span><span class="params">(T value)</span> &#123;</span><br><span class="line">    <span class="type">Thread</span> <span class="variable">t</span> <span class="operator">=</span> Thread.currentThread();</span><br><span class="line">    <span class="type">ThreadLocalMap</span> <span class="variable">map</span> <span class="operator">=</span> getMap(t);</span><br><span class="line">    <span class="keyword">if</span> (map != <span class="literal">null</span>) &#123; </span><br><span class="line">      	<span class="comment">// 注意set时，K为this，也就是ThreadLocal的对象</span></span><br><span class="line">        map.set(<span class="built_in">this</span>, value);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        createMap(t, value);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<p><strong>关于内存泄漏</strong></p>
<p>除了Entry使用了弱引用，还在resize和set方法中使用了判key是否空来减少value泄漏的可能</p>
<p>但不能完全消除</p>
<h3 id="Message"><a href="#Message" class="headerlink" title="Message"></a>Message</h3><h4 id="参数"><a href="#参数" class="headerlink" title="参数"></a>参数</h4><p><strong>what</strong></p>
<p>标识message，不需要担心不同的handler的相同what的message冲突，不同handler的message会独立</p>
<p><strong>arg1 arg2</strong></p>
<p>存储int数据，如果只需要存储简单的int，则不需要动用setData通过bundle来存储</p>
<p><strong>obj</strong></p>
<p>存储Parcelable的对象，非Parcelable使用setData的bundle来存储</p>
<h4 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h4><p><strong>obtain</strong></p>
<p>从message的池子里获取一个对象，没有则新建</p>
<div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> Message <span class="title function_">obtain</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">synchronized</span> (sPoolSync) &#123;</span><br><span class="line">        <span class="keyword">if</span> (sPool != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="type">Message</span> <span class="variable">m</span> <span class="operator">=</span> sPool;</span><br><span class="line">            sPool = m.next;</span><br><span class="line">            m.next = <span class="literal">null</span>;</span><br><span class="line">            m.flags = <span class="number">0</span>; <span class="comment">// clear in-use flag</span></span><br><span class="line">            sPoolSize--;</span><br><span class="line">            <span class="keyword">return</span> m;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Message</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<h2 id="MessageQueue"><a href="#MessageQueue" class="headerlink" title="MessageQueue"></a>MessageQueue</h2><p><strong>消息入队</strong></p>
<p>核心在于for(;;)循环遍历链表</p>
<p>算法上是一个基于时间when变量的插入排序</p>
<div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">boolean</span> <span class="title function_">enqueueMessage</span><span class="params">(Message msg, <span class="type">long</span> when)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (msg.target == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(<span class="string">&quot;Message must have a target.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">synchronized</span> (<span class="built_in">this</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (msg.isInUse()) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalStateException</span>(msg + <span class="string">&quot; This message is already in use.&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (mQuitting) &#123;</span><br><span class="line">            <span class="type">IllegalStateException</span> <span class="variable">e</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">IllegalStateException</span>(</span><br><span class="line">                    msg.target + <span class="string">&quot; sending message to a Handler on a dead thread&quot;</span>);</span><br><span class="line">            Log.w(TAG, e.getMessage(), e);</span><br><span class="line">            msg.recycle();</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        msg.markInUse();</span><br><span class="line">        msg.when = when;</span><br><span class="line">        <span class="type">Message</span> <span class="variable">p</span> <span class="operator">=</span> mMessages;</span><br><span class="line">        <span class="type">boolean</span> needWake;</span><br><span class="line">        <span class="keyword">if</span> (p == <span class="literal">null</span> || when == <span class="number">0</span> || when &lt; p.when) &#123;</span><br><span class="line">            <span class="comment">// New head, wake up the event queue if blocked.</span></span><br><span class="line">            msg.next = p;</span><br><span class="line">            mMessages = msg;</span><br><span class="line">            needWake = mBlocked;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// Inserted within the middle of the queue.  Usually we don&#x27;t have to wake</span></span><br><span class="line">            <span class="comment">// up the event queue unless there is a barrier at the head of the queue</span></span><br><span class="line">            <span class="comment">// and the message is the earliest asynchronous message in the queue.</span></span><br><span class="line">            needWake = mBlocked &amp;&amp; p.target == <span class="literal">null</span> &amp;&amp; msg.isAsynchronous();</span><br><span class="line">            Message prev;</span><br><span class="line">            <span class="keyword">for</span> (;;) &#123;</span><br><span class="line">                prev = p;</span><br><span class="line">                p = p.next;</span><br><span class="line">                <span class="keyword">if</span> (p == <span class="literal">null</span> || when &lt; p.when) &#123;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (needWake &amp;&amp; p.isAsynchronous()) &#123;</span><br><span class="line">                    needWake = <span class="literal">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            msg.next = p; <span class="comment">// invariant: p == prev.next</span></span><br><span class="line">            prev.next = msg;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// We can assume mPtr != 0 because mQuitting is false.</span></span><br><span class="line">        <span class="keyword">if</span> (needWake) &#123;</span><br><span class="line">            nativeWake(mPtr);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p><strong>获取队首消息</strong></p>
<p>核心代码同样在于for(;;)</p>
<p>这里只保留了要分析的代码</p>
<div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"> Message <span class="title function_">next</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (;;) &#123;</span><br><span class="line">      <span class="comment">// 队列头节点未到回调时间，等待</span></span><br><span class="line">        <span class="keyword">if</span> (nextPollTimeoutMillis != <span class="number">0</span>) &#123;</span><br><span class="line">            Binder.flushPendingCommands();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        nativePollOnce(ptr, nextPollTimeoutMillis);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">synchronized</span> (<span class="built_in">this</span>) &#123;</span><br><span class="line">            <span class="comment">// Try to retrieve the next message.  Return if found.</span></span><br><span class="line">            <span class="keyword">final</span> <span class="type">long</span> <span class="variable">now</span> <span class="operator">=</span> SystemClock.uptimeMillis();</span><br><span class="line">            <span class="type">Message</span> <span class="variable">prevMsg</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">            <span class="type">Message</span> <span class="variable">msg</span> <span class="operator">=</span> mMessages;</span><br><span class="line">            <span class="keyword">if</span> (msg != <span class="literal">null</span> &amp;&amp; msg.target == <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="comment">// Stalled by a barrier.  Find the next asynchronous message in the queue.</span></span><br><span class="line">                <span class="keyword">do</span> &#123;</span><br><span class="line">                    prevMsg = msg;</span><br><span class="line">                    msg = msg.next;</span><br><span class="line">                &#125; <span class="keyword">while</span> (msg != <span class="literal">null</span> &amp;&amp; !msg.isAsynchronous());</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (msg != <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span> (now &lt; msg.when) &#123;</span><br><span class="line">                <span class="comment">// 设置等待时间</span></span><br><span class="line">                  nextPollTimeoutMillis = (<span class="type">int</span>) Math.min(msg.when - now, Integer.MAX_VALUE);</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="comment">// Got a message.</span></span><br><span class="line">                    mBlocked = <span class="literal">false</span>;</span><br><span class="line">                    <span class="keyword">if</span> (prevMsg != <span class="literal">null</span>) &#123;</span><br><span class="line">                        prevMsg.next = msg.next;</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        mMessages = msg.next;</span><br><span class="line">                    &#125;</span><br><span class="line">                    msg.next = <span class="literal">null</span>;</span><br><span class="line">                    <span class="keyword">if</span> (DEBUG) Log.v(TAG, <span class="string">&quot;Returning message: &quot;</span> + msg);</span><br><span class="line">                    msg.markInUse();</span><br><span class="line">                   <span class="comment">// 这里返回了队首message</span></span><br><span class="line">                    <span class="keyword">return</span> msg;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">// No more messages.</span></span><br><span class="line">                nextPollTimeoutMillis = -<span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="Looper"><a href="#Looper" class="headerlink" title="Looper"></a>Looper</h2><p>核心代码loop方法</p>
<div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">loop</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">// 获取当前线程的Looper</span></span><br><span class="line">    <span class="keyword">final</span> <span class="type">Looper</span> <span class="variable">me</span> <span class="operator">=</span> myLooper();</span><br><span class="line">    <span class="keyword">if</span> (me == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;No Looper; Looper.prepare() wasn&#x27;t called on this thread.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">final</span> <span class="type">MessageQueue</span> <span class="variable">queue</span> <span class="operator">=</span> me.mQueue;</span><br><span class="line">    ...</span><br><span class="line">    <span class="keyword">for</span> (;;) &#123;</span><br><span class="line">        <span class="comment">// 获取消息队列中的消息</span></span><br><span class="line">        <span class="type">Message</span> <span class="variable">msg</span> <span class="operator">=</span> queue.next(); <span class="comment">// might block</span></span><br><span class="line">        <span class="keyword">if</span> (msg == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="comment">// 返回null说明MessageQueue退出了</span></span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        ...</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 调用Message对应的Handler处理消息, target就是对应的handler</span></span><br><span class="line">            msg.target.dispatchMessage(msg);</span><br><span class="line">            <span class="keyword">if</span> (observer != <span class="literal">null</span>) &#123;</span><br><span class="line">                observer.messageDispatched(token, msg);</span><br><span class="line">            &#125;</span><br><span class="line">            dispatchEnd = needEndTime ? SystemClock.uptimeMillis() : <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        ...</span><br><span class="line">      <span class="comment">// 回收Message</span></span><br><span class="line">        msg.recycleUnchecked();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<h2 id="Handler"><a href="#Handler" class="headerlink" title="Handler"></a>Handler</h2><p>post、postDelayed等方法，都调用到了sendMessageAtTime方法</p>
<p>基本内容就是，把用runnable生成一个message对象，最后执行messageQueue的enqueueMessage方法</p>
<p>实现了消息入队</p>
<div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="type">boolean</span> <span class="title function_">postDelayed</span><span class="params">(Runnable r, <span class="type">int</span> what, <span class="type">long</span> delayMillis)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> sendMessageDelayed(getPostMessage(r).setWhat(what), delayMillis);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">sendMessageAtTime</span><span class="params">(<span class="meta">@NonNull</span> Message msg, <span class="type">long</span> uptimeMillis)</span> &#123;</span><br><span class="line">    <span class="type">MessageQueue</span> <span class="variable">queue</span> <span class="operator">=</span> mQueue;</span><br><span class="line">    <span class="keyword">if</span> (queue == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="type">RuntimeException</span> <span class="variable">e</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(</span><br><span class="line">                <span class="built_in">this</span> + <span class="string">&quot; sendMessageAtTime() called with no mQueue&quot;</span>);</span><br><span class="line">        Log.w(<span class="string">&quot;Looper&quot;</span>, e.getMessage(), e);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> enqueueMessage(queue, msg, uptimeMillis);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>


      
    </div>
    
  </div>
  
  
</article>

  
    <article id="post-手Q一面" class="article global-container article-type-post" itemscope itemprop="blogPost">
  
    <header class="article-header">
      
  
    <h1 itemprop="name">
      <a class="article-title" href="/2023/04/24/%E6%89%8BQ%E4%B8%80%E9%9D%A2/">鹅的鹅的一面</a>
    </h1>
  

    </header>
  
  <div class="article-meta">
    <a href="/2023/04/24/%E6%89%8BQ%E4%B8%80%E9%9D%A2/" class="article-date">
  <time datetime="2023-04-24T12:29:57.422Z" itemprop="datePublished">2023-04-24</time>
</a>
    
    
  </div>
  

  <div class="article-inner">
    
    <div class="article-content article-content-cloud" itemprop="articleBody">
      
        <h1 id="手Q一面"><a href="#手Q一面" class="headerlink" title="手Q一面"></a>手Q一面</h1><p>tx是鹅的话，QQ就是鹅的鹅，合理</p>
<p>与面试官鏖战两个小时十分钟</p>
<p>歇了一天才写的，可能忘了不少</p>
<hr>
<p>上来自然是自我介绍</p>
<p>然后是项目</p>
<h2 id="项目"><a href="#项目" class="headerlink" title="项目"></a>项目</h2><ul>
<li>第一个项目是外包，说一下哪里接的</li>
<li>自己做了APP的哪些部分</li>
<li>整体架构如何设计</li>
<li>接口文档是由谁设计的</li>
<li>大概多长时间</li>
<li>遇到什么难解决的问题</li>
<li>定位防抖怎么解决的</li>
<li>简单说一下第二个项目的整体架构<ul>
<li>底层模块有蓝牙、网络等模块</li>
<li>上层MVP</li>
</ul>
</li>
<li>遇到什么问题</li>
<li>实习有什么收获</li>
<li>实习遇到什么问题</li>
<li>有没有解决过APP卡顿问题</li>
</ul>
<h2 id="八股"><a href="#八股" class="headerlink" title="八股"></a>八股</h2><ul>
<li>说一下android四大组件</li>
<li>activity的启动模式，及其应用场景</li>
<li>Java面向对象的三大特征及其意义</li>
<li>Arraylist如何实现可以重复执行多次add操作的<ul>
<li>扩容</li>
</ul>
</li>
<li>HashMap的底层数据结构是什么，作用是什么</li>
<li>Java四种引用类型及其应用场景</li>
<li>Java垃圾回收的方式</li>
<li>Java如何跨平台的</li>
<li>volatile的作用</li>
<li>TCP和UDP的区别，及其应用场景</li>
<li>TCP如何保证可靠性</li>
<li>https和http的区别</li>
<li>https握手过程</li>
<li>进程和线程的区别</li>
<li>虚拟内存的概念</li>
<li>死锁的条件和如何预防死锁</li>
</ul>
<h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><ul>
<li>实现一个单例模式<ul>
<li>我写了DCL</li>
</ul>
</li>
<li>反转链表</li>
</ul>

      
    </div>
    
  </div>
  
  
</article>

  
    <article id="post-TodoList" class="article global-container article-type-post" itemscope itemprop="blogPost">
  
    <header class="article-header">
      
  
    <h1 itemprop="name">
      <a class="article-title" href="/2023/04/20/TodoList/">TodoList by An</a>
    </h1>
  

    </header>
  
  <div class="article-meta">
    <a href="/2023/04/20/TodoList/" class="article-date">
  <time datetime="2023-04-20T15:28:44.364Z" itemprop="datePublished">2023-04-20</time>
</a>
    
    
  </div>
  

  <div class="article-inner">
    
    <div class="article-content article-content-cloud" itemprop="articleBody">
      
        <ul>
<li><p>设计模式</p>
<ul>
<li>全部的demo</li>
<li>每个模式出一个博客</li>
</ul>
</li>
<li><p>算法复习</p>
<ul>
<li>基本模版，包括二分、快速幂、扩展欧几里得</li>
<li>其他模版，包括图论、高级数据结构</li>
<li>每个都需要出一篇博客</li>
</ul>
</li>
<li><p>专业基础知识相关</p>
<ul>
<li>计算机网络</li>
<li>操作系统</li>
<li>安全相关，包括简单攻防手段及其原理，每种出一篇博客</li>
</ul>
</li>
<li><p>Android相关</p>
<ul>
<li>View绘制流程</li>
<li>handler机制</li>
<li>事件分发机制</li>
<li>Okhttp源码</li>
<li>Retrofit源码</li>
<li>…</li>
</ul>
</li>
<li><p>Java和Kotlin</p>
<ul>
<li>锁</li>
<li>协程</li>
<li>Kotlin基础和特点</li>
<li></li>
</ul>
</li>
<li><p>对博客整理分类</p>
</li>
</ul>

      
    </div>
    
  </div>
  
  
</article>

  
    <article id="post-T458杀猪" class="article global-container article-type-post" itemscope itemprop="blogPost">
  
    <header class="article-header">
      
  
    <h1 itemprop="name">
      <a class="article-title" href="/2023/04/20/T458%E6%9D%80%E7%8C%AA/">458. 可怜的小猪(杀猪)</a>
    </h1>
  

    </header>
  
  <div class="article-meta">
    <a href="/2023/04/20/T458%E6%9D%80%E7%8C%AA/" class="article-date">
  <time datetime="2023-04-20T14:55:49.097Z" itemprop="datePublished">2023-04-20</time>
</a>
    
    
  </div>
  

  <div class="article-inner">
    
    <div class="article-content article-content-cloud" itemprop="articleBody">
      
        <h2 id="458-可怜的小猪"><a href="#458-可怜的小猪" class="headerlink" title="458. 可怜的小猪"></a>458. 可怜的小猪</h2><p><strong>description</strong></p>
<p><a target="_blank" rel="noopener" href="https://leetcode.cn/problems/poor-pigs/">458. 可怜的小猪</a></p>
<p>有 <code>buckets</code> 桶液体，其中 正好有一桶 含有毒药，其余装的都是水。它们从外观看起来都一样。为了弄清楚哪只水桶含有毒药，你可以喂一些猪喝，通过观察猪是否会死进行判断。不幸的是，你只有<code> minutesToTest</code> 分钟时间来确定哪桶液体是有毒的</p>
<p>喂猪的规则如下：</p>
<p>选择若干活猪进行喂养<br>可以允许小猪同时饮用任意数量的桶中的水，并且该过程不需要时间。<br>小猪喝完水后，必须有 <code>minutesToDie</code> 分钟的冷却时间。在这段时间里，你只能观察，而不允许继续喂猪。<br>过了 <code>minutesToDie</code> 分钟后，所有喝到毒药的猪都会死去，其他所有猪都会活下来。<br>重复这一过程，直到时间用完。<br>给你桶的数目 <code>buckets</code> ，<code>minutesToDie</code> 和 <code>minutesToTest</code> ，返回 在规定时间内判断哪个桶有毒所需的 最小 猪数 。</p>
<p><strong>示例 1：</strong></p>
<div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAINTEXT"><figure class="iseeu highlight /plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">输入：buckets = 1000, minutesToDie = 15, minutesToTest = 60</span><br><span class="line">输出：5</span><br></pre></td></tr></table></figure></div>

<p><strong>示例 2：</strong></p>
<div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAINTEXT"><figure class="iseeu highlight /plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">输入：buckets = 4, minutesToDie = 15, minutesToTest = 15</span><br><span class="line">输出：2</span><br></pre></td></tr></table></figure></div>



<p><strong>思路分析</strong></p>
<p>这里设实验次数为k &#x3D; [minutesToTest &#x2F; minutesToDie],  N &#x3D; buckets</p>
<ol>
<li><p>对于k&#x3D;&#x3D;1的情况, 是一道耳熟能详的题目, 答案为$log_2(N - 1) + 1$</p>
</li>
<li><p>再无思路</p>
</li>
<li><p>反转题目, 考虑给到m头猪, 可以验证多少桶水</p>
<ul>
<li>首先$2^m$显然可以</li>
<li>考虑到这里, 其实问题就变成了, 给一个m, 哪种运算可以使得结果最大</li>
<li>个人得出结论为m!</li>
<li>因为考虑到猪会死亡的情况, 未能想到$n^n$的情况</li>
</ul>
</li>
<li><p>查看题解, 发现信息论相关, 豁然开朗</p>
</li>
<li><p>根据香农理论, 可以得出$n^n$的答案</p>
</li>
</ol>
<p><strong>关于信息论和香农</strong></p>
<p>其基本理论为, 一个事件可以提供的信息量Q &#x3D; - $log_2{P}$,  P为事件发生的概率</p>
<p>通俗的解释, 我们观察到太阳从东边升起来, 这件事告诉我们的信息几乎没有, 因为这是很正常的事情. 或者这是必然的事情</p>
<p>再比如, 我们观察到飞机失事了, 那么我们可以得出更多的信息, 比如飞行员问题, 飞机硬件问题等等</p>
<p>这个问题较为抽象..不理解正常</p>
<p><strong>代码</strong></p>
<div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">poorPigs</span><span class="params">(<span class="type">int</span> buckets, <span class="type">int</span> minutesToDie, <span class="type">int</span> minutesToTest)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">k</span> <span class="operator">=</span> minutesToTest / minutesToDie;</span><br><span class="line">        <span class="type">int</span> <span class="variable">t</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">ans</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(<span class="literal">true</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span>(t &gt;= buckets)<span class="keyword">return</span> ans;</span><br><span class="line">            ans++;</span><br><span class="line">            t *= (k + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>


      
    </div>
    
  </div>
  
  
</article>

  
    <article id="post-非对称加密和RSA算法" class="article global-container article-type-post" itemscope itemprop="blogPost">
  
    <header class="article-header">
      
  
    <h1 itemprop="name">
      <a class="article-title" href="/2023/04/20/%E9%9D%9E%E5%AF%B9%E7%A7%B0%E5%8A%A0%E5%AF%86%E5%92%8CRSA%E7%AE%97%E6%B3%95/">非对称加密和RSA算法</a>
    </h1>
  

    </header>
  
  <div class="article-meta">
    <a href="/2023/04/20/%E9%9D%9E%E5%AF%B9%E7%A7%B0%E5%8A%A0%E5%AF%86%E5%92%8CRSA%E7%AE%97%E6%B3%95/" class="article-date">
  <time datetime="2023-04-20T14:37:18.736Z" itemprop="datePublished">2023-04-20</time>
</a>
    
    
  </div>
  

  <div class="article-inner">
    
    <div class="article-content article-content-cloud" itemprop="articleBody">
      
        <h1 id="非对称加密和RSA算法"><a href="#非对称加密和RSA算法" class="headerlink" title="非对称加密和RSA算法"></a>非对称加密和RSA算法</h1><h2 id="对称加密"><a href="#对称加密" class="headerlink" title="对称加密"></a>对称加密</h2><p>客户端A和服务端B通信, 设^为加密运算, v为解密运算</p>
<ol>
<li>约定密钥K, K可对明文加密, 密文解密</li>
<li>A发送明文S, 则密文为str &#x3D;  S ^  K, 发送str</li>
<li>B收到str, 解密得明文S &#x3D; str v K</li>
<li>反之, 亦可</li>
</ol>
<p>其问题在于, 密钥K得传输时存在泄露的可能</p>
<h2 id="非对称加密"><a href="#非对称加密" class="headerlink" title="非对称加密"></a>非对称加密</h2><p>客户端A和服务端B通信</p>
<ol>
<li>设K, P为公钥和私钥, K加密, P解密</li>
<li>B暴露出K, A获取K</li>
<li>A发送明文S, 则密文为str &#x3D;  S ^  K, 发送str</li>
<li>B收到str, 解密得明文S &#x3D; str v P</li>
<li>至此实现了单方面得A发送, B接收的数据传输</li>
</ol>
<p>其原理基于, 不能在NP时间内通过K解出P</p>
<p>由于计算复杂, 一般会通过一次非对称加密来传递一个对称加密的密钥, 后续通信使用对称加密即可</p>
<h2 id="RSA算法"><a href="#RSA算法" class="headerlink" title="RSA算法"></a>RSA算法</h2><p>基于大数分解定理的一种非对称加密算法</p>
<p>大数分解, 一种陷门函数, 即可以在NP时间复杂度内正向计算f(x) &#x3D; y, 但根据y解出x是NP完全问题(目前无法证明不是) </p>
<p>​	密文 &#x3D; $明文^E$ mod N</p>
<p>​	明文&#x3D; $密文^D$ mod N</p>
<p>生产过程: </p>
<ol>
<li><p>N &#x3D; p * q</p>
</li>
<li><p>L &#x3D; lcm（p－1，q－1）</p>
</li>
<li><p>1 &lt; E &lt; L</p>
<p>gcd（E，L）&#x3D;1</p>
</li>
<li><p>1 &lt; D &lt; L</p>
<p>E＊D mod L ＝ 1</p>
</li>
</ol>
<h2 id="代码实现"><a href="#代码实现" class="headerlink" title="代码实现"></a>代码实现</h2><p>Java代码, 用到了java.security包</p>
<p>采用了1024bit的密钥长度, 理论上破解时间为2000年以上</p>
<p>服务端生成公私钥</p>
<div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span> <span class="variable">KEYSIZE</span> <span class="operator">=</span> <span class="number">1024</span>;</span><br><span class="line"><span class="type">SecureRandom</span> <span class="variable">sr</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SecureRandom</span>();</span><br><span class="line"><span class="type">KeyPairGenerator</span> <span class="variable">kpg</span> <span class="operator">=</span> KeyPairGenerator.getInstance(<span class="string">&quot;RSA&quot;</span>);</span><br><span class="line">kpg.initialize(KEYSIZE, sr);</span><br><span class="line"><span class="comment">// 生成公私钥</span></span><br><span class="line"><span class="type">KeyPair</span> <span class="variable">kp</span> <span class="operator">=</span> kpg.generateKeyPair();</span><br><span class="line"></span><br><span class="line"><span class="type">Key</span> <span class="variable">publicKey</span> <span class="operator">=</span> kp.getPublic();</span><br><span class="line"><span class="type">byte</span>[] publicKeyBytes = publicKey.getEncoded();</span><br><span class="line"><span class="type">String</span> <span class="variable">pub</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(Base64.encodeBase64(publicKeyBytes),</span><br><span class="line">          ConfigureEncryptAndDecrypt.CHAR_ENCODING);</span><br><span class="line"></span><br><span class="line"><span class="type">Key</span> <span class="variable">privateKey</span> <span class="operator">=</span> kp.getPrivate();</span><br><span class="line"><span class="type">byte</span>[] privateKeyBytes = privateKey.getEncoded();</span><br><span class="line"><span class="type">String</span> <span class="variable">pri</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(Base64.encodeBase64(privateKeyBytes),</span><br><span class="line">          ConfigureEncryptAndDecrypt.CHAR_ENCODING);</span><br></pre></td></tr></table></figure></div>

<p>客户端接收数据代码</p>
<div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="KOTLIN"><figure class="iseeu highlight /kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">runReceive</span><span class="params">()</span></span> = thread &#123;</span><br><span class="line">    <span class="keyword">val</span> ds = DatagramSocket(<span class="number">10086</span>)</span><br><span class="line">    <span class="keyword">val</span> container = ByteArray(<span class="number">1024</span>)</span><br><span class="line">    <span class="keyword">val</span> dp = DatagramPacket(container, container.size)</span><br><span class="line">    ds.receive(dp)</span><br><span class="line">    <span class="keyword">val</span> s = String(dp.<span class="keyword">data</span>, <span class="number">0</span>, dp.length)</span><br><span class="line">    <span class="keyword">val</span> msgRe1 = GsonUtil.fromJson&lt;Msg&gt;(s)</span><br><span class="line">    println(msgRe1)</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//获取到公钥</span></span><br><span class="line">    <span class="keyword">val</span> pubKey = msgRe1.raw.msg</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 用公钥加密对称加密的密钥</span></span><br><span class="line">    <span class="keyword">val</span> encode = RSA.encrypt(msg2.raw.msg, pubKey)</span><br><span class="line">    msg2.raw.msg = encode</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 放到list中, send线程将发送此密钥</span></span><br><span class="line">    list.add(GsonUtil.toJson(msg2))</span><br><span class="line">    </span><br><span class="line">    println(<span class="string">&quot;aes:<span class="variable">$secret</span>&quot;</span>)</span><br><span class="line">    println(<span class="string">&quot;与服务端建立起安全连接&quot;</span>)</span><br><span class="line">    isLogin = <span class="literal">true</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 下面为一次非对称加密成功之后, 对称加密部分</span></span><br><span class="line">    <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">        ds.receive(dp)</span><br><span class="line">        <span class="keyword">val</span> encodeData = String(dp.<span class="keyword">data</span>, <span class="number">0</span>, dp.length)</span><br><span class="line">        <span class="keyword">val</span> <span class="keyword">data</span> = AES.decryptWithKeyBase64(encodeData, secret)</span><br><span class="line">        <span class="keyword">val</span> msg = GsonUtil.fromJson&lt;Msg&gt;(<span class="keyword">data</span>)</span><br><span class="line">        <span class="keyword">if</span> (msg.raw.target.userName !== <span class="string">&quot;server&quot;</span>) &#123;</span><br><span class="line">            <span class="comment">// todo check hash</span></span><br><span class="line">            <span class="keyword">if</span> (!(makeHash(msg.raw) != msg.hash)) &#123;</span><br><span class="line">                println(<span class="string">&quot;data might be changed&quot;</span>)</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">val</span> content = <span class="string">&quot;server:<span class="subst">$&#123;msg.raw.msg&#125;</span>&quot;</span></span><br><span class="line">            println(content)</span><br><span class="line">            println(msg)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<p>客户端发送数据代码</p>
<div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="KOTLIN"><figure class="iseeu highlight /kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">   <span class="function"><span class="keyword">fun</span> <span class="title">runSend</span><span class="params">()</span></span> = thread &#123;</span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">            <span class="keyword">while</span> (list.isEmpty()) &#123;</span><br><span class="line">                sleep(<span class="number">500</span>)</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">val</span> soc = Socket(SERVER_IP, <span class="number">1090</span>)</span><br><span class="line">            <span class="keyword">val</span> outStream = soc.getOutputStream()</span><br><span class="line">            <span class="keyword">val</span> <span class="keyword">data</span> = list[<span class="number">0</span>]</span><br><span class="line">            list.removeAt(<span class="number">0</span>)</span><br><span class="line">            outStream.write(<span class="keyword">data</span>.toByteArray())</span><br><span class="line">            outStream.flush()</span><br><span class="line">            outStream.close()</span><br><span class="line">        &#125;</span><br><span class="line"><span class="comment">//        soc.close()</span></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></div>


      
    </div>
    
  </div>
  
  
</article>

  
    <article id="post-T07_08" class="article global-container article-type-post" itemscope itemprop="blogPost">
  
    <header class="article-header">
      
  
    <h1 itemprop="name">
      <a class="article-title" href="/2023/04/18/T07_08/">T07_08 面试题 08.07. 无重复字符串的排列组合</a>
    </h1>
  

    </header>
  
  <div class="article-meta">
    <a href="/2023/04/18/T07_08/" class="article-date">
  <time datetime="2023-04-18T12:14:37.160Z" itemprop="datePublished">2023-04-18</time>
</a>
    
    
  </div>
  

  <div class="article-inner">
    
    <div class="article-content article-content-cloud" itemprop="articleBody">
      
        <h1 id="面试题-08-07-无重复字符串的排列组合"><a href="#面试题-08-07-无重复字符串的排列组合" class="headerlink" title="面试题 08.07. 无重复字符串的排列组合"></a>面试题 08.07. 无重复字符串的排列组合</h1><p>Describtion：</p>
<h4 id="面试题-08-07-无重复字符串的排列组合-1"><a href="#面试题-08-07-无重复字符串的排列组合-1" class="headerlink" title="面试题 08.07. 无重复字符串的排列组合"></a><a target="_blank" rel="noopener" href="https://leetcode.cn/problems/permutation-i-lcci/">面试题 08.07. 无重复字符串的排列组合</a></h4><p>无重复字符串的排列组合。编写一种方法，计算某字符串的所有排列组合，字符串每个字符均不相同。</p>
<p><strong>示例1:</strong></p>
<div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAINTEXT"><figure class="iseeu highlight /plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">输入：S = &quot;qwe&quot;</span><br><span class="line">输出：[&quot;qwe&quot;, &quot;qew&quot;, &quot;wqe&quot;, &quot;weq&quot;, &quot;ewq&quot;, &quot;eqw&quot;]</span><br></pre></td></tr></table></figure></div>

<p><strong>示例2:</strong></p>
<div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAINTEXT"><figure class="iseeu highlight /plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">输入：S = &quot;ab&quot;</span><br><span class="line">输出：[&quot;ab&quot;, &quot;ba&quot;]</span><br></pre></td></tr></table></figure></div>

<p><strong>提示:</strong></p>
<ol>
<li>字符都是英文字母。</li>
<li>字符串长度在[1, 9]之间。</li>
</ol>
<p><strong>思路</strong></p>
<p>裸题，全排列，dfs+回溯</p>
<p><strong>代码</strong></p>
<div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.LinkedList;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">T07_08</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        String[] s = <span class="keyword">new</span> <span class="title class_">T07_08</span>().permutation(<span class="string">&quot;a&quot;</span>);</span><br><span class="line">        System.out.println(Arrays.toString(s));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String[] permutation(String S) &#123;</span><br><span class="line">        <span class="type">int</span>[] vis = <span class="keyword">new</span> <span class="title class_">int</span>[S.length()];</span><br><span class="line">        LinkedList&lt;String&gt; ans = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">        <span class="type">StringBuilder</span> <span class="variable">sb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line">        dfs(vis,S,ans,<span class="number">0</span>,sb);</span><br><span class="line">        <span class="keyword">return</span>  ans.toArray(String[]::<span class="keyword">new</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">dfs</span><span class="params">(<span class="type">int</span>[] vis, String S, LinkedList&lt;String&gt; ans, <span class="type">int</span> nowIndex, StringBuilder sb)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (sb.length() == S.length()) &#123;</span><br><span class="line">            ans.add(sb.toString());</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; S.length(); i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (vis[i] == <span class="number">1</span>) <span class="keyword">continue</span>;</span><br><span class="line">            vis[i] = <span class="number">1</span>;</span><br><span class="line">            dfs(vis, S, ans, nowIndex, sb.append(S.charAt(i)));</span><br><span class="line">            sb.delete(sb.length() - <span class="number">1</span>, sb.length());</span><br><span class="line">            vis[i] = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
      
    </div>
    
  </div>
  
  
</article>

  
    <article id="post-SQL注入" class="article global-container article-type-post" itemscope itemprop="blogPost">
  
    <header class="article-header">
      
  
    <h1 itemprop="name">
      <a class="article-title" href="/2023/04/17/SQL%E6%B3%A8%E5%85%A5/">SQL注入</a>
    </h1>
  

    </header>
  
  <div class="article-meta">
    <a href="/2023/04/17/SQL%E6%B3%A8%E5%85%A5/" class="article-date">
  <time datetime="2023-04-17T13:52:39.555Z" itemprop="datePublished">2023-04-17</time>
</a>
    
    
  </div>
  

  <div class="article-inner">
    
    <div class="article-content article-content-cloud" itemprop="articleBody">
      
        <h1 id="SQL注入"><a href="#SQL注入" class="headerlink" title="SQL注入"></a>SQL注入</h1><h2 id="什么是SQL注入漏洞？"><a href="#什么是SQL注入漏洞？" class="headerlink" title="什么是SQL注入漏洞？"></a>什么是SQL注入漏洞？</h2><p>用户可以提交一段数据库查询代码，根据程序返回的结果，获得某些他想得知的数据，这就是所谓的SQL Injection，即SQL注入。</p>
<h2 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h2><p>下面以最简单的SQL注入举例</p>
<p>以登录为例, 假设服务器明文存储了用户名和密码</p>
<h3 id="正常前后端交互流程分析"><a href="#正常前后端交互流程分析" class="headerlink" title="正常前后端交互流程分析"></a>正常前后端交互流程分析</h3><ol>
<li><p>用户输入用户名name&#x3D; 123和密码password &#x3D; 123</p>
</li>
<li><p>前端传输数据到服务器, 服务器获取name&#x3D; 123和password &#x3D; 123</p>
</li>
<li><p>服务器根据name&#x3D; 123和password &#x3D; 123向数据库发送请求</p>
</li>
<li><p>查询语句为</p>
<div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="SQL"><figure class="iseeu highlight /sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">FROM</span> `<span class="keyword">user</span>` <span class="keyword">WHERE</span> name<span class="operator">=</span><span class="number">123</span> <span class="keyword">AND</span> password<span class="operator">=</span><span class="number">123</span></span><br></pre></td></tr></table></figure></div>
</li>
<li><p>数据库找到了匹配的用户名密码，返回数据, 表示数据库中存在此用户, 且用户名密码匹配</p>
</li>
<li><p>服务器返回数据到前端, 允许登录用户名为123的账号</p>
</li>
</ol>
<h3 id="SQL注入方式"><a href="#SQL注入方式" class="headerlink" title="SQL注入方式"></a>SQL注入方式</h3><ol>
<li><p>输入name &#x3D; 123 OR 1 #</p>
</li>
<li><p>输入password为任意值, 以456为例</p>
</li>
<li><p>网络传输, 服务器发起数据库查询的命令</p>
</li>
<li><p>此时, 查询寻语句为</p>
<div class="highlight-box"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="SQL"><figure class="iseeu highlight /sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">FROM</span> `<span class="keyword">user</span>` <span class="keyword">WHERE</span> name<span class="operator">=</span><span class="number">123</span> <span class="keyword">OR</span> <span class="number">1</span> # <span class="keyword">AND</span> password<span class="operator">=</span><span class="number">456</span></span><br></pre></td></tr></table></figure></div>
</li>
<li><p>由于SQL语句中, #后为注释内容, 故不执行, OR 1确保了该语句的where必定为真, 返回数据库中user表中全部数据</p>
</li>
<li><p>查询到有返回值, 服务判断匹配, 允许前端登录</p>
</li>
<li><p>完成了SQL注入, 实现登录</p>
</li>
</ol>

      
    </div>
    
  </div>
  
  
</article>

  


  <nav id="page-nav">
    
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/2/">Next &amp;raquo;</a>
  </nav>


</section>
        <aside id="sidebar">
  
    <div class="widget-box">
  <div class="avatar-box">
    <img class="avatar" src="/images/default-avatar.jpg" title="图片来自网络"></img>
    <h3 class="avatar-name">
      
        安安
      
    </h3>
    <p class="avatar-slogan">
      正在摸鱼的安卓实习生
    </p>
  </div>
</div>


  
    

  
    

  
    
  
    
  <div class="widget-box">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/04/">April 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/03/">March 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/02/">February 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/10/">October 2022</a></li></ul>
    </div>
  </div>

  
    
  <div class="widget-box">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2023/04/24/%E6%89%8BQ%E4%BA%8C%E9%9D%A2/">鹅的鹅的二面</a>
          </li>
        
          <li>
            <a href="/2023/04/24/QuickSort/">快速排序模版</a>
          </li>
        
          <li>
            <a href="/2023/04/24/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/">面试相关的操作系统题目</a>
          </li>
        
          <li>
            <a href="/2023/04/24/Handler%E6%9C%BA%E5%88%B6/">关于handler机制</a>
          </li>
        
          <li>
            <a href="/2023/04/24/%E6%89%8BQ%E4%B8%80%E9%9D%A2/">鹅的鹅的一面</a>
          </li>
        
      </ul>
    </div>
  </div>

  
      <div class="widget-box">
    <h3 class="widget-title">友链</h3>
    <div class="widget">
      
    </div>
  </div>

  
</aside>
      </div>
      <footer id="footer">
  <div class="foot-box global-width">
    &copy; 2023 John Doe &nbsp;&nbsp;
    Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    &nbsp;|&nbsp;主题 <a target="_blank" rel="noopener" href="https://github.com/yiluyanxia/hexo-theme-antiquity">antiquity</a>
    <br>
    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span id="busuanzi_container_site_pv">不蒜子告之   阁下是第<span id="busuanzi_value_site_pv"></span>个访客</span>
  </div>
</footer>
      <script src="https://code.jquery.com/jquery-2.0.3.min.js"></script>
<script>
if (!window.jQuery) {
var script = document.createElement('script');
script.src = "/js/jquery-2.0.3.min.js";
document.body.write(script);
}
</script>

  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




    </div>
    <nav id="mobile-nav" class="mobile-nav-box">
  <div class="mobile-nav-img mobile-nav-top"></div>
  
    <a href="/" class="mobile-nav-link">首页</a>
  
    <a href="/archives" class="mobile-nav-link">归档</a>
  
  <div class="mobile-nav-img  mobile-nav-bottom"></div>
</nav>    
  </div>
</body>
</html>