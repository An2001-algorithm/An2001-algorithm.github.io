<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://example.com/page/2/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 6.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-795. 区间子数组个数" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/02/10/795.%20%E5%8C%BA%E9%97%B4%E5%AD%90%E6%95%B0%E7%BB%84%E4%B8%AA%E6%95%B0/" class="article-date">
  <time class="dt-published" datetime="2023-02-10T06:26:44.291Z" itemprop="datePublished">2023-02-10</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/02/10/795.%20%E5%8C%BA%E9%97%B4%E5%AD%90%E6%95%B0%E7%BB%84%E4%B8%AA%E6%95%B0/">795. 区间子数组个数</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="795-区间子数组个数"><a href="#795-区间子数组个数" class="headerlink" title="795. 区间子数组个数"></a>795. 区间子数组个数</h1><h2 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h2><blockquote>
<p>给你一个整数数组 nums 和两个整数：left 及 right 。找出 nums 中连续、非空且其中最大元素在范围 [left, right] 内的子数组，并返回满足条件的子数组的个数。</p>
<p>生成的测试用例保证结果符合 32-bit 整数范围。</p>
<p>示例 1：</p>
<p>输入：nums &#x3D; [2,1,4,3], left &#x3D; 2, right &#x3D; 3<br>输出：3<br>解释：满足条件的三个子数组：[2], [2, 1], [3]<br>示例 2：</p>
<p>输入：nums &#x3D; [2,9,2,5,6], left &#x3D; 2, right &#x3D; 8<br>输出：7</p>
<p>提示：</p>
<p>1 &lt;&#x3D; nums.length &lt;&#x3D;$10^5$<br>0 &lt;&#x3D; nums[i] &lt;&#x3D; $10^9$<br>0 &lt;&#x3D; left &lt;&#x3D; right &lt;&#x3D; $10^5$<br>来源：力扣（LeetCode）<br>链接：<a target="_blank" rel="noopener" href="https://leetcode.cn/problems/number-of-subarrays-with-bounded-maximum">https://leetcode.cn/problems/number-of-subarrays-with-bounded-maximum</a><br>著作权归领扣网络所有。商业转载请联系官方授权，非商业转载请注明出处。</p>
</blockquote>
<h2 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h2><ul>
<li><p>复杂度分析: $10^5$, 应为O( N )或者O( $log_N$ )</p>
</li>
<li><p>递推解决, 对于f[ i ], 应从f[ i - 1 ]推导而来</p>
</li>
<li><p>分类讨论</p>
<ul>
<li>当nums[ i ] 大于right时, nums[ i ]对于最终ans没有贡献 </li>
<li>当nums[ i ] 小于left时, nums[ i ]的贡献, 应为:上一个在区间[left, right]内的数, 所在的符合要求的连续子数组的个数 + 1</li>
<li>当nums[ i ] 在区间[left, right]内时, nums[ i ]的贡献, 应为: 当前位置i所在的, 符合要求的连续子数组的个数</li>
</ul>
</li>
</ul>
<h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// Created by anjiaheng01 on 2022/11/24.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> MAXN = <span class="number">1e5</span> + <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> num[MAXN];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">numSubarrayBoundedMax</span><span class="params">(vector&lt;<span class="type">int</span>&gt; &amp;nums, <span class="type">int</span> left, <span class="type">int</span> right)</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> l = nums.<span class="built_in">size</span>();</span><br><span class="line">    <span class="type">int</span> f[<span class="number">100000</span> + <span class="number">10</span>] = &#123;<span class="number">0</span>&#125;;</span><br><span class="line">    <span class="type">int</span> lastMaxPos = <span class="number">-1</span>;</span><br><span class="line">    <span class="type">int</span> lastVPos = <span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">if</span> (nums[<span class="number">0</span>] &lt;= right &amp;&amp; nums[<span class="number">0</span>] &gt;= left) &#123;</span><br><span class="line">        f[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">        lastVPos = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (nums[<span class="number">0</span>] &gt; right) &#123;</span><br><span class="line">        lastMaxPos = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt; l; i++) &#123;</span><br><span class="line">        f[i] = f[i - <span class="number">1</span>];</span><br><span class="line">        <span class="keyword">if</span> (nums[i] &gt; right) &#123;</span><br><span class="line">            lastMaxPos = i;</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (nums[i] &lt; left) &#123;</span><br><span class="line">            <span class="keyword">if</span> (lastVPos - lastMaxPos &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span> (lastMaxPos == <span class="number">-1</span>) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (lastVPos != <span class="number">-1</span>)</span><br><span class="line">                        f[i] = f[i - <span class="number">1</span>] + lastVPos + <span class="number">1</span>;</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (lastVPos != <span class="number">-1</span>)</span><br><span class="line">                    f[i] = f[i - <span class="number">1</span>] + lastVPos - lastMaxPos;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            lastVPos = i;</span><br><span class="line">            <span class="keyword">if</span> (i - lastMaxPos &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span> (lastMaxPos == <span class="number">-1</span>)</span><br><span class="line">                    f[i] = f[i - <span class="number">1</span>] + i + <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                    f[i] = f[i - <span class="number">1</span>] + i - lastMaxPos;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> f[l - <span class="number">1</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    vector&lt;<span class="type">int</span>&gt; v&#123;&#125;;</span><br><span class="line">    v.<span class="built_in">insert</span>(v.<span class="built_in">end</span>(), &#123;<span class="number">5</span>,<span class="number">4</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">1</span>&#125;);</span><br><span class="line">    cout &lt;&lt; <span class="built_in">numSubarrayBoundedMax</span>(v, <span class="number">1</span>, <span class="number">5</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><p>对于代码, 可以优化, 但是我现在急着下班..</p>
<p>比如, f数组是冗余的, 可以参照, 01背包的滚动数组</p>
<p>对于, 小于left和在[left, right]范围内的两种情况,可以统一处理</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/02/10/795.%20%E5%8C%BA%E9%97%B4%E5%AD%90%E6%95%B0%E7%BB%84%E4%B8%AA%E6%95%B0/" data-id="cldy5bog50000h0w9f1o0ebn7" data-title="795. 区间子数组个数" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-组内趣事" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/02/10/%E7%BB%84%E5%86%85%E8%B6%A3%E4%BA%8B/" class="article-date">
  <time class="dt-published" datetime="2023-02-10T06:26:44.290Z" itemprop="datePublished">2023-02-10</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/02/10/%E7%BB%84%E5%86%85%E8%B6%A3%E4%BA%8B/">组内趣事</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="实习快乐语录"><a href="#实习快乐语录" class="headerlink" title="实习快乐语录"></a>实习快乐语录</h1><ol>
<li><p>z老师: 这originId谁加的，tmd，看不懂</p>
<p>…30s later</p>
<p>z老师: tmd, 我加的</p>
</li>
<li><p>z老师: za, 这, 这逻辑谁写的, 这么复杂</p>
<p>…30s later</p>
<p>z老师: 我写的</p>
<p>za: 现在只有上帝知道这些代码啥意思</p>
</li>
<li><p>组会开始前</p>
<p>某人: z老师昨天请假了?</p>
<p>z老师: 本来想今天也请假的, 但到了十几个快递, 来取快递</p>
<p>众人: 笑)</p>
</li>
<li><p>群里</p>
<p>某人: 这bug不好复现啊</p>
<p>主管: 偷偷标上已解决, 等测试下次复现再说</p>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/02/10/%E7%BB%84%E5%86%85%E8%B6%A3%E4%BA%8B/" data-id="cldy5bogi000dh0w9g0mbfwkr" data-title="组内趣事" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-一次http请求的过程" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/02/10/%E4%B8%80%E6%AC%A1http%E8%AF%B7%E6%B1%82%E7%9A%84%E8%BF%87%E7%A8%8B/" class="article-date">
  <time class="dt-published" datetime="2023-02-10T06:26:44.287Z" itemprop="datePublished">2023-02-10</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/02/10/%E4%B8%80%E6%AC%A1http%E8%AF%B7%E6%B1%82%E7%9A%84%E8%BF%87%E7%A8%8B/">一次http请求的过程</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="一次http请求的过程"><a href="#一次http请求的过程" class="headerlink" title="一次http请求的过程"></a>一次http请求的过程</h1><ul>
<li>使用DNS域名解析</li>
<li>发起TCP的3次握手</li>
<li>建立TCP连接后发起<strong>http请求</strong>；</li>
<li>服务器响应<strong>http请求</strong>，浏览器得到返回response；</li>
</ul>
<h2 id="七层模型和五层模型"><a href="#七层模型和五层模型" class="headerlink" title="七层模型和五层模型"></a>七层模型和五层模型</h2><h3 id="七层模型"><a href="#七层模型" class="headerlink" title="七层模型"></a>七层模型</h3><p><img src="https://pic1.zhimg.com/v2-2d62ba265be486cb94ab531912aa3b9c_r.jpg" alt="img"></p>
<p><img src="https://pic2.zhimg.com/80/v2-436927a69a3574532059a78623d3095d_720w.webp" alt="img"></p>
<h2 id="使用DNS域名解析"><a href="#使用DNS域名解析" class="headerlink" title="使用DNS域名解析"></a>使用DNS域名解析</h2><p>使用域名的原因: 类比于用变量名代替地址, 使之有意义, 方便管理和记忆</p>
<h3 id="域名服务器的分级"><a href="#域名服务器的分级" class="headerlink" title="域名服务器的分级"></a>域名服务器的分级</h3><h4 id="ex-www-cs-android-com"><a href="#ex-www-cs-android-com" class="headerlink" title="ex: www.cs.android.com."></a>ex: <a target="_blank" rel="noopener" href="http://www.cs.android.com/">www.cs.android.com</a>.</h4><ul>
<li><p>.: 根域名</p>
</li>
<li><p>com: 顶级域名</p>
</li>
<li><p>android: 一级域名</p>
</li>
<li><p>cs: 二级域名</p>
</li>
<li><p>www: 主机名</p>
</li>
</ul>
<h3 id="解析的过程"><a href="#解析的过程" class="headerlink" title="解析的过程"></a>解析的过程</h3><ul>
<li><p>非递归服务器只用来查询下一级域名的 IP 地址，然后返回给发起查询的服务器, 由发起查询的服务器进行下一步操作</p>
</li>
<li><p>递归 DNS 服务器则把分步骤的查询过程自动化，方便用户一次性得到结果</p>
<p>它内部有缓存，可以保存以前查询的结果，下次再有人查询，就直接返回缓存里面的结果。所以它能加快查询，减轻源头 DNS 服务器的负担</p>
</li>
</ul>
<h2 id="TCP的3次握手和4次挥手"><a href="#TCP的3次握手和4次挥手" class="headerlink" title="TCP的3次握手和4次挥手"></a>TCP的3次握手和4次挥手</h2><h3 id="三次握手"><a href="#三次握手" class="headerlink" title="三次握手"></a>三次握手</h3><h4 id="原因"><a href="#原因" class="headerlink" title="原因"></a>原因</h4><p>这个问题的本质是, 信道不可靠, 但是通信双发需要就某个问题达成一致. 而要解决这个问题, 无论你在消息中包含什么信息, 三次通信是理论上的最小值. 所以三次握手不是TCP本身的要求, 而是为了满足”在不可靠信道上可靠地传输信息”这一需求所导致的. </p>
<p>客户端和服务端通信前要进行连接，“3次握手”的作用就是<code>双方都能明确自己和对方的收、发能力是正常的</code>。</p>
<p><code>第一次握手</code>：客户端发送网络包，服务端收到了。这样服务端就能得出结论：客户端的发送能力、服务端的接收能力是正常的。</p>
<p><code>第二次握手</code>：服务端发包，客户端收到了。这样客户端就能得出结论：服务端的接收、发送能力，客户端的接收、发送能力是正常的。 从客户端的视角来看，我接到了服务端发送过来的响应数据包，说明服务端接收到了我在第一次握手时发送的网络包，并且成功发送了响应数据包，这就说明，服务端的接收、发送能力正常。而另一方面，我收到了服务端的响应数据包，说明我第一次发送的网络包成功到达服务端，这样，我自己的发送和接收能力也是正常的。</p>
<p><code>第三次握手</code>：客户端发包，服务端收到了。这样服务端就能得出结论：客户端的接收、发送能力，服务端的发送、接收能力是正常的。 第一、二次握手后，服务端并不知道客户端的接收能力以及自己的发送能力是否正常。而在第三次握手时，服务端收到了客户端对第二次握手作的回应。从服务端的角度，我在第二次握手时的响应数据发送出去了，客户端接收到了。所以，我的发送能力是正常的。而客户端的接收能力也是正常的。</p>
<p>经历了上面的三次握手过程，客户端和服务端都确认了自己的接收、发送能力是正常的。之后就可以正常通信了。</p>
<p>打电话: </p>
<ol>
<li>A-&gt;B: 歪, 可以听到吗</li>
<li>B-&gt;A: 歪, 可以听到, 你可以听到吗</li>
<li>A-&gt;B: 歪, 我也可以听到 </li>
<li>开始交流</li>
</ol>
<h4 id="具体数据"><a href="#具体数据" class="headerlink" title="具体数据"></a>具体数据</h4><ol>
<li>刚开始客户端和服务端都是处于关闭的状态，而且服务端一直处于监听的状态，时刻监听是否有建立连接的请求；</li>
<li>当有客户端需要建立连接的时候就会发送一个确定连接的报文，此报文是同步报文SYN &#x3D; 1，并且会生成一个随机的序号 seq &#x3D; x，这是第一次握手；</li>
<li>当服务端接收到请求连接报文的时候，会发送一个同步报文确认报文，此报文 SYN &#x3D; 1，并且 ACK &#x3D; 1，同时服务端也会随机生成一个 seq &#x3D; y，并将 ack 设置成 x + 1，回传给客户端，这是第二次握手；</li>
<li>当客户端接收到服务端的 ACK 报文后，会回复一个 ACK 确认报文，用于确认确认报文已经收到，此报文 ACK &#x3D; 1，seq &#x3D; x + 1, ack &#x3D; y + 1，这是第三次握手；</li>
</ol>
<h3 id="四次挥手"><a href="#四次挥手" class="headerlink" title="四次挥手"></a>四次挥手</h3><h4 id="原因-1"><a href="#原因-1" class="headerlink" title="原因"></a>原因</h4><p>打电话: </p>
<ol>
<li>A-&gt;B: 我说完了, 我想挂了</li>
<li>B-&gt;A: 好的, 我知道了,你别说了,  等我说完</li>
<li>B-&gt;A: 好的, 我说完了, 可以挂了</li>
<li>A-&gt;B: 我知道了, 挂了</li>
<li>嘀嘀嘀~</li>
</ol>
<p>第一次挥手: 客户端发起关闭连接的请求给服务端；</p>
<p>第二次挥手: 服务端收到关闭请求的时候可能这个时候数据还没发送完，所以服务端会先回复一个确认报文，表示自己知道客户端想要关闭连接了，但是因为数据还没传输完，所以还需要等待；</p>
<p>第三次挥手: 当数据传输完了，服务端会主动发送一个 FIN 报文，告诉客户端，表示数据已经发送完了，服务端这边准备关闭连接了.</p>
<p>第四次挥手: 当客户端收到服务端的 FIN 报文过后，会回复一个 ACK 报文，告诉服务端自己知道了，再等待一会就关闭连接。</p>
<p>为什么握手要三次，挥手却要四次呢？</p>
<ul>
<li>那是因为握手的时候并没有数据传输，所以服务端的 SYN 和 ACK 报文可以一起发送，但是挥手的时候有数据在传输，所以 ACK 和 FIN 报文不能同时发送，需要分两步，所以会比握手多一步。</li>
</ul>
<h4 id="具体数据-1"><a href="#具体数据-1" class="headerlink" title="具体数据"></a>具体数据</h4><ol>
<li>客户端发起 FIN 断开连接的报文，携带随机生成的 seq 值 u，发送给服务端，并且自己处于 FIN-WSIT 状态，这是第一次挥手；</li>
<li>服务端接收到 FIN 报文后，回复一个确认报文，其中 ACK &#x3D; 1，随机生成一个 seq，以及 ack &#x3D; u + 1，这是第二次挥手；</li>
<li>当服务端数据发送完了过后，再发送一个 FIN 报文给客户端，通知客户端，服务端准备关闭连接了，此报文 FIN &#x3D; 1，ACK &#x3D; 1，ack &#x3D; u + 1，seq &#x3D; w，这是第三次挥手；</li>
<li>当客户端收到 FIN 确认报文时再发送一个FIN 的确认报文，其中 ACK &#x3D; 1，seq &#x3D; u + 1，ack &#x3D; w + 1，并进入 TIME-WAIT 状态，当等待 2MSL 后关闭连接，这是第四次挥手。</li>
</ol>
<h2 id="TCP和UDP的区别"><a href="#TCP和UDP的区别" class="headerlink" title="TCP和UDP的区别"></a>TCP和UDP的区别</h2><table>
<thead>
<tr>
<th align="left"></th>
<th align="left">UDP</th>
<th align="left">TCP</th>
</tr>
</thead>
<tbody><tr>
<td align="left">是否连接</td>
<td align="left">无连接</td>
<td align="left">面向连接</td>
</tr>
<tr>
<td align="left">是否可靠</td>
<td align="left">不可靠传输，不使用流量控制和拥塞控制</td>
<td align="left">可靠传输，使用流量控制和拥塞控制</td>
</tr>
<tr>
<td align="left">连接对象个数</td>
<td align="left">支持一对一，一对多，多对一和多对多交互通信</td>
<td align="left">只能是一对一通信</td>
</tr>
<tr>
<td align="left">传输方式</td>
<td align="left">面向报文</td>
<td align="left">面向字节流</td>
</tr>
<tr>
<td align="left">首部开销</td>
<td align="left">首部开销小，仅8字节</td>
<td align="left">首部最小20字节，最大60字节</td>
</tr>
<tr>
<td align="left">适用场景</td>
<td align="left">适用于实时应用（IP电话、视频会议、直播等）</td>
<td align="left">适用于要求可靠传输的应用，例如文件传输</td>
</tr>
</tbody></table>
<h2 id="路由协议有哪些"><a href="#路由协议有哪些" class="headerlink" title="路由协议有哪些"></a>路由协议有哪些</h2><h3 id="RIP"><a href="#RIP" class="headerlink" title="RIP"></a>RIP</h3><h3 id="OSPF"><a href="#OSPF" class="headerlink" title="OSPF"></a>OSPF</h3><h3 id="BGP"><a href="#BGP" class="headerlink" title="BGP"></a>BGP</h3><h2 id="Http协议概念"><a href="#Http协议概念" class="headerlink" title="Http协议概念"></a>Http协议概念</h2><h3 id="1-0"><a href="#1-0" class="headerlink" title="1.0"></a>1.0</h3><h3 id="1-1"><a href="#1-1" class="headerlink" title="1.1"></a>1.1</h3><h3 id="2-0"><a href="#2-0" class="headerlink" title="2.0"></a>2.0</h3><h3 id="3-0"><a href="#3-0" class="headerlink" title="3.0"></a>3.0</h3><h2 id="Socket的概念"><a href="#Socket的概念" class="headerlink" title="Socket的概念"></a>Socket的概念</h2><h2 id="WebSocket的概念"><a href="#WebSocket的概念" class="headerlink" title="WebSocket的概念"></a>WebSocket的概念</h2><h2 id="ARP协议"><a href="#ARP协议" class="headerlink" title="ARP协议"></a>ARP协议</h2><ol>
<li>实现了局域网内ip到mac的映射</li>
<li>不同局域网之间的主机通信, 使用host A—&gt;router,  …,  router—&gt;host B</li>
<li>通过发送广播实现, 信息为目的ip, 局域网内符合与之吻合的主机回应, 返回mac地址, 源主机做本地缓存</li>
</ol>
<h2 id="NAT协议"><a href="#NAT协议" class="headerlink" title="NAT协议"></a>NAT协议</h2><ol>
<li>实现了(公网ip, port) 到 (内网ip, port)的映射</li>
<li>目的是解决ipv4地址不足的问题</li>
</ol>
<h3 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h3><ol>
<li>NAT 无法从外部向内部服务器建立连接</li>
<li>路由器应该只处理第3层功能</li>
<li>违背端到端通信原则</li>
</ol>
<h2 id="面向连接和面向无连接"><a href="#面向连接和面向无连接" class="headerlink" title="面向连接和面向无连接"></a>面向连接和面向无连接</h2><ul>
<li><p>无连接协议中的分组被称为数据报（datagram），每个分组都是独立寻址，并由应用程序发送的。从协议的角度来看，每个数据报都是一个独立的实体，与在两个相同的对等实体之间传送的任何其他数据报都没有关系</p>
</li>
<li><p>面向连接的协议则维护了分组之间的状态，使用这种协议的应用程序通常都会进行长期的对话。记住这些状态，协议就可以提供可靠的传输</p>
</li>
<li><p>典型的面向连接协议有三个阶段。第一阶段，在对等实体间<strong>建立连接</strong>。接下来是数据传输阶段，在这个阶段中，<strong>数据在对等实体间传输</strong>。最后，当对等实体完成数据传输时，<strong>连接被拆除</strong>。</p>
</li>
<li><p>一种标准的类比是：使用无连接协议就像寄信，而使用面向连接的协议就像打电话。</p>
</li>
</ul>
<h2 id="HTTP-状态码"><a href="#HTTP-状态码" class="headerlink" title="HTTP 状态码"></a>HTTP 状态码</h2><p>响应分为五类：信息响应(100–199)，成功响应(200–299)，重定向(300–399)，客户端错误(400–499)和服务器错误 (500–599)</p>
<table>
<thead>
<tr>
<th>100</th>
<th>Continue</th>
<th>继续。客户端应继续其请求</th>
</tr>
</thead>
<tbody><tr>
<td>200</td>
<td>OK</td>
<td>请求成功。一般用于GET与POST请求</td>
</tr>
<tr>
<td>400</td>
<td>Bad Request</td>
<td>客户端请求的语法错误，服务器无法理解</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden</td>
<td>服务器理解请求客户端的请求，但是拒绝执行此请求</td>
</tr>
<tr>
<td>404</td>
<td>Not Found</td>
<td>服务器无法根据客户端的请求找到资源（网页）</td>
</tr>
<tr>
<td>408</td>
<td>Request Time-out</td>
<td>服务器等待客户端发送的请求时间过长，超时</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error</td>
<td>服务器内部错误，无法完成请求</td>
</tr>
<tr>
<td>502</td>
<td>Bad Gateway</td>
<td>作为网关或者代理工作的服务器尝试执行请求时，从远程服务器接收到了一个无效的响应</td>
</tr>
</tbody></table>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/02/10/%E4%B8%80%E6%AC%A1http%E8%AF%B7%E6%B1%82%E7%9A%84%E8%BF%87%E7%A8%8B/" data-id="cldy5bogg000ah0w925oi6qbk" data-title="一次http请求的过程" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-事件分发机制" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/02/10/%E4%BA%8B%E4%BB%B6%E5%88%86%E5%8F%91%E6%9C%BA%E5%88%B6/" class="article-date">
  <time class="dt-published" datetime="2023-02-10T06:26:44.283Z" itemprop="datePublished">2023-02-10</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/02/10/%E4%BA%8B%E4%BB%B6%E5%88%86%E5%8F%91%E6%9C%BA%E5%88%B6/">事件分发机制</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="事件分发机制"><a href="#事件分发机制" class="headerlink" title="事件分发机制"></a>事件分发机制</h1><h2 id="前文"><a href="#前文" class="headerlink" title="前文"></a>前文</h2><p>开发过程中遇到一个问题, 将xml的布局类型替换之后, 原先MagicIndicator正常的点击事件失效了</p>
<h2 id="尝试查看原理"><a href="#尝试查看原理" class="headerlink" title="尝试查看原理"></a>尝试查看原理</h2><ol>
<li><p>breakpoint 打到<code>ViewGroup</code>的<code> dispatchTransformedTouchEvent()</code>方法的 <code>handled = child.dispatchTouchEvent(event)</code> 这一行</p>
</li>
<li><p>在手指抬起前加入以上 breakpoint, 以方便查看<code>ACTION_UP</code>事件</p>
</li>
<li><p>多次递归, 进入最后一层递归<code>RecyclerView</code>的<code> dispatchTouchEvent()</code> 方法</p>
</li>
<li><p>进入 <code>handled = dispatchTransformedTouchEvent(ev,canceled,null,TouchTarget.ALL_POINTER_IDS);</code>方法</p>
</li>
<li><p>上一条中方法第三个参数为null, 查看原因</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** </span></span><br><span class="line"><span class="comment"> * mFirstTouchTarget 为 null, 故传入null (这是传入null的直接原因)</span></span><br><span class="line"><span class="comment"> * 在else语句中, while循环遍历 mFirstTouchTarget 链表, 最后mFirstTouchTarget也为null</span></span><br><span class="line"><span class="comment"> * 即, 此if语句之后, mFirstTouchTarget 必为null</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">	</span><br><span class="line"><span class="keyword">if</span> (mFirstTouchTarget == <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="comment">// No touch targets so treat this as an ordinary view.</span></span><br><span class="line">    handled = dispatchTransformedTouchEvent(ev, canceled, <span class="literal">null</span>,</span><br><span class="line">            TouchTarget.ALL_POINTER_IDS);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// Dispatch to touch targets, excluding the new touch target if we already</span></span><br><span class="line">    <span class="comment">// dispatched to it.  Cancel touch targets if necessary.</span></span><br><span class="line">    <span class="type">TouchTarget</span> <span class="variable">predecessor</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="type">TouchTarget</span> <span class="variable">target</span> <span class="operator">=</span> mFirstTouchTarget;</span><br><span class="line">    <span class="keyword">while</span> (target != <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">final</span> <span class="type">TouchTarget</span> <span class="variable">next</span> <span class="operator">=</span> target.next;</span><br><span class="line">        <span class="keyword">if</span> (alreadyDispatchedToNewTouchTarget &amp;&amp; target == newTouchTarget) &#123;</span><br><span class="line">            handled = <span class="literal">true</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">final</span> <span class="type">boolean</span> <span class="variable">cancelChild</span> <span class="operator">=</span> resetCancelNextUpFlag(target.child)</span><br><span class="line">                    || intercepted;</span><br><span class="line">            <span class="keyword">if</span> (dispatchTransformedTouchEvent(ev, cancelChild,</span><br><span class="line">                    target.child, target.pointerIdBits)) &#123;</span><br><span class="line">                handled = <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (cancelChild) &#123;</span><br><span class="line">                <span class="keyword">if</span> (predecessor == <span class="literal">null</span>) &#123;</span><br><span class="line">                    mFirstTouchTarget = next;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    predecessor.next = next;</span><br><span class="line">                &#125;</span><br><span class="line">                target.recycle();</span><br><span class="line">                target = next;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        predecessor = target;</span><br><span class="line">        target = next;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>这里引出对<code>TouchTarget</code>的关注, 见下文的TouchTarget标题</p>
</li>
<li><p><code>mFirstTouchTarget</code>为空的原因为<code>dispatchTransformedTouchEvent</code>()分发<code>ACTION_DOWN</code>事件未被消费, 导致<code>addTouchTarget()</code>未被调用过</p>
</li>
<li><p>因此, 需查看<code>ACTION_DOWN</code>事件未被消费的原因</p>
</li>
<li><p>上面扯远了, 自己研究源码没整明白, 向leader询问, 这里回归点击事件被吞掉的原因</p>
</li>
<li><p>原先的ViewGroup是LinearLayout, 改成了ConstraintLayout, 而且下方的RecyclerView设置相对位置错误, 导致和上面的MagicIndicator重叠了, 而且RecyclerView设置了android:paddingTop&#x3D;”20dp”, 导致了问题</p>
</li>
<li></li>
</ol>
 <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 原先代码为 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">net.lucode.hackware.magicindicator.MagicIndicator</span></span></span><br><span class="line"><span class="tag"> 		<span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span>    </span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">com.airbnb.epoxy.EpoxyRecyclerView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:paddingTop</span>=<span class="string">&quot;20dp&quot;</span> /&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 修改后bug代码为 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">androidx.constraintlayout.widget.ConstraintLayout</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">net.lucode.hackware.magicindicator.MagicIndicator</span></span></span><br><span class="line"><span class="tag">		<span class="attr">android:id</span>=<span class="string">&quot;@+id/container&quot;</span></span></span><br><span class="line"><span class="tag">		<span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag"> 		<span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag"> 		<span class="attr">app:layout_constraintBottom_toBottomOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag"> 		<span class="attr">app:layout_constraintStart_toStartOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">		<span class="attr">app:layout_constraintTop_toTopOf</span>=<span class="string">&quot;parent&quot;</span> /&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">com.airbnb.epoxy.EpoxyRecyclerView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:paddingTop</span>=<span class="string">&quot;20dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintTop_toBottomOf</span>=<span class="string">&quot;@id/container&quot;</span> /&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;/<span class="name">androidx.constraintlayout.widget.ConstraintLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="TouchTarget"><a href="#TouchTarget" class="headerlink" title="TouchTarget"></a>TouchTarget</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">TouchTarget</span> &#123;</span><br><span class="line">    <span class="comment">// The touched child view.</span></span><br><span class="line">    <span class="meta">@UnsupportedAppUsage</span></span><br><span class="line">    <span class="keyword">public</span> View child;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// The combined bit mask of pointer ids for all pointers captured by the target.</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> pointerIdBits;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// The next target in the target list.</span></span><br><span class="line">    <span class="keyword">public</span> TouchTarget next;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@UnsupportedAppUsage</span></span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">TouchTarget</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> TouchTarget <span class="title function_">obtain</span><span class="params">(<span class="meta">@NonNull</span> View child, <span class="type">int</span> pointerIdBits)</span> &#123;</span><br><span class="line">  		<span class="comment">//...</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">recycle</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//...</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>此类是消费了<code>ACTION_DOWN</code>事件的view的集合, 方便了后续的<code>ACTION_MOVE</code>和<code>ACTION_UP</code>事件的处理, 即, 不需要重新遍历整个view树, 只需要遍历TouchTarget链表</p>
<h2 id="为解决该问题学到事件分发的基本流程"><a href="#为解决该问题学到事件分发的基本流程" class="headerlink" title="为解决该问题学到事件分发的基本流程"></a>为解决该问题学到事件分发的基本流程</h2><p>1.<br> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 从Activity的dispatchTouchEvent()开始分析</span></span><br><span class="line"><span class="comment"> * 先判断是否是ACTION_DOWN事件, 对于ACTION_DOWN有特殊处理, 这里不讨论</span></span><br><span class="line"><span class="comment"> * 然后调用了Window类的子类PhoneWindow的superDispatchTouchEvent()方法</span></span><br><span class="line"><span class="comment"> * PhoneWindow的superDispatchTouchEvent()直接调用了DecorView的superDispatchTouchEvent()</span></span><br><span class="line"><span class="comment"> * 调用了ViewGroup的dispatchTouchEvent()方法</span></span><br><span class="line"><span class="comment"> * 如果ViewGroup#dispatchTouchEvent()返回true, Activity的事件分发流程结束</span></span><br><span class="line"><span class="comment"> * 否则, 进入onTouchEvent()方法, 这里不讨论</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">dispatchTouchEvent</span><span class="params">(MotionEvent ev)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (ev.getAction() == MotionEvent.ACTION_DOWN) &#123;</span><br><span class="line">        onUserInteraction();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (getWindow().superDispatchTouchEvent(ev)) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> onTouchEvent(ev);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>2. </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment">  * viewGroup的事件分发</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">dispatchTouchEvent</span><span class="params">(MotionEvent ev)</span> &#123;</span><br><span class="line">   	<span class="comment">//...</span></span><br><span class="line">    <span class="type">boolean</span> <span class="variable">handled</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">if</span> (onFilterTouchEventForSecurity(ev)) &#123;</span><br><span class="line">        <span class="keyword">final</span> <span class="type">int</span> <span class="variable">action</span> <span class="operator">=</span> ev.getAction();</span><br><span class="line">        <span class="keyword">final</span> <span class="type">int</span> <span class="variable">actionMasked</span> <span class="operator">=</span> action &amp; MotionEvent.ACTION_MASK;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">final</span> <span class="type">boolean</span> intercepted;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 这里对ACTION_DOWN事件和其他事件做了区分, 因为ACTION_DOWN是第一个传递到各个view的事件</span></span><br><span class="line"><span class="comment">         * view响应了ACTION_DOWN事件后, 会被加入mFirstTouchTarget链表中, 方便在响应</span></span><br><span class="line"><span class="comment">         * ACTION_MOVE和ACTION_UP事件时, 不需要遍历整个view树, 只需要到链表找查找即可, 提高效率</span></span><br><span class="line"><span class="comment">         * </span></span><br><span class="line"><span class="comment">         * 如果不是ACTION_DOWN事件, 且mFirstTouchTarget链表为空, 表示下层view都不能处理</span></span><br><span class="line"><span class="comment">         * 该事件, 需要判断为拦截, 不进行下发</span></span><br><span class="line"><span class="comment">         *</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">if</span> (actionMasked == MotionEvent.ACTION_DOWN || mFirstTouchTarget != <span class="literal">null</span>) &#123;</span><br><span class="line">			<span class="comment">//如果允许拦截,intercepted变量标志着事件是否被拦截</span></span><br><span class="line">            <span class="keyword">if</span> (!disallowIntercept) &#123;</span><br><span class="line">                intercepted = onInterceptTouchEvent(ev);</span><br><span class="line">                ev.setAction(action); <span class="comment">// restore action in case it was changed</span></span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                intercepted = <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// There are no touch targets and this action is not an initial down</span></span><br><span class="line">            <span class="comment">// so this view group continues to intercept touches.</span></span><br><span class="line">            intercepted = <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 如果事件没有取消且未拦截, 开始事件分发</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">if</span> (!canceled &amp;&amp; !intercepted) &#123;</span><br><span class="line">		   <span class="keyword">if</span> (actionMasked == MotionEvent.ACTION_DOWN</span><br><span class="line">                    || (split &amp;&amp; actionMasked == MotionEvent.ACTION_POINTER_DOWN)</span><br><span class="line">                    || actionMasked == MotionEvent.ACTION_HOVER_MOVE) &#123;</span><br><span class="line">               </span><br><span class="line">               		<span class="comment">/**</span></span><br><span class="line"><span class="comment">               		 * for循环遍历此viewGroup的全部children_view</span></span><br><span class="line"><span class="comment">                     */</span></span><br><span class="line">                    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> childrenCount - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">    				<span class="comment">/**</span></span><br><span class="line"><span class="comment">                     * canReceivePointerEvents()判断此view是否能响应点击事件</span></span><br><span class="line"><span class="comment">                     * isTransformedTouchPointInView()方法判断点击位置是否在view内</span></span><br><span class="line"><span class="comment">                     * 都满足则分发事件</span></span><br><span class="line"><span class="comment">                     */</span></span><br><span class="line">                        <span class="keyword">if</span> (!child.canReceivePointerEvents()</span><br><span class="line">                            || !isTransformedTouchPointInView(x, y, child, <span class="literal">null</span>)) &#123;</span><br><span class="line">                          </span><br><span class="line">                            ev.setTargetAccessibilityFocus(<span class="literal">false</span>);</span><br><span class="line">                            <span class="keyword">continue</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="comment">/**</span></span><br><span class="line"><span class="comment">                         * dispatchTransformedTouchEvent()向下分发事件</span></span><br><span class="line"><span class="comment">                         * 如果返回ture, 说明事件被处理, 调用了break退出循环</span></span><br><span class="line"><span class="comment">                         * </span></span><br><span class="line"><span class="comment">                         */</span></span><br><span class="line">                        <span class="keyword">if</span> (dispatchTransformedTouchEvent(ev, <span class="literal">false</span>, child,idBitsToAssign)) &#123;</span><br><span class="line">            				<span class="comment">//...</span></span><br><span class="line">                            mLastTouchDownX = ev.getX();</span><br><span class="line">                            mLastTouchDownY = ev.getY();</span><br><span class="line">                            newTouchTarget = addTouchTarget(child, idBitsToAssign);</span><br><span class="line">                            alreadyDispatchedToNewTouchTarget = <span class="literal">true</span>;</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        &#125;</span><br><span class="line"></span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">if</span> (preorderedList != <span class="literal">null</span>) preorderedList.clear();</span><br><span class="line">                &#125;</span><br><span class="line">            	<span class="comment">//...</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * mFirstTouchTarget == null表示下次view都不能处理此事件</span></span><br><span class="line"><span class="comment">         * 这里会调用到 super.dispatchTouchEvent(event) </span></span><br><span class="line"><span class="comment">         * 也就是view的dispatchTouchEvent(event)</span></span><br><span class="line"><span class="comment">         * 在里面判断了是否设置了监听器, 如果没有, 认为不能处理该事件, 返回false, 交由上层处理</span></span><br><span class="line"><span class="comment">         * 否则, 返回了true, 表示处理完成</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">if</span> (mFirstTouchTarget == <span class="literal">null</span>) &#123;</span><br><span class="line">            handled = dispatchTransformedTouchEvent(ev, canceled, <span class="literal">null</span>,</span><br><span class="line">                    TouchTarget.ALL_POINTER_IDS);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">/**</span></span><br><span class="line"><span class="comment">             * 如果mFirstTouchTarget不为空, 表示下次有view能处理该事件</span></span><br><span class="line"><span class="comment">             * 通过链表结构, 下发事件</span></span><br><span class="line"><span class="comment">             */</span></span><br><span class="line">            <span class="type">TouchTarget</span> <span class="variable">predecessor</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">            <span class="type">TouchTarget</span> <span class="variable">target</span> <span class="operator">=</span> mFirstTouchTarget;</span><br><span class="line">            <span class="keyword">while</span> (target != <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">final</span> <span class="type">TouchTarget</span> <span class="variable">next</span> <span class="operator">=</span> target.next;</span><br><span class="line">                <span class="keyword">if</span> (alreadyDispatchedToNewTouchTarget &amp;&amp; target == newTouchTarget) &#123;</span><br><span class="line">                    handled = <span class="literal">true</span>;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="keyword">final</span> <span class="type">boolean</span> <span class="variable">cancelChild</span> <span class="operator">=</span> resetCancelNextUpFlag(target.child)</span><br><span class="line">                            || intercepted;</span><br><span class="line">                    <span class="keyword">if</span> (dispatchTransformedTouchEvent(ev, cancelChild,</span><br><span class="line">                            target.child, target.pointerIdBits)) &#123;</span><br><span class="line">                        handled = <span class="literal">true</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">if</span> (cancelChild) &#123;</span><br><span class="line">                        <span class="keyword">if</span> (predecessor == <span class="literal">null</span>) &#123;</span><br><span class="line">                            mFirstTouchTarget = next;</span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                            predecessor.next = next;</span><br><span class="line">                        &#125;</span><br><span class="line">                        target.recycle();</span><br><span class="line">                        target = next;</span><br><span class="line">                        <span class="keyword">continue</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                predecessor = target;</span><br><span class="line">                target = next;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">    &#125;</span><br><span class="line">	<span class="comment">//...</span></span><br><span class="line">    <span class="keyword">return</span> handled;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li></li>
</ol>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//<span class="doctag">TODO:</span> View的事件分发和onTouchEvent()方法的分析</span></span><br></pre></td></tr></table></figure>

<h2 id="发现一个好文章"><a href="#发现一个好文章" class="headerlink" title="发现一个好文章"></a>发现一个好文章</h2><p>记录在此<a target="_blank" rel="noopener" href="https://gist.github.com/jp1017/0e5dede13737c85754f8">https://gist.github.com/jp1017/0e5dede13737c85754f8</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/02/10/%E4%BA%8B%E4%BB%B6%E5%88%86%E5%8F%91%E6%9C%BA%E5%88%B6/" data-id="cldy5boge0007h0w9eyhi15v3" data-title="事件分发机制" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-设计模式---面向对象六大原则" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/02/10/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F---%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E5%85%AD%E5%A4%A7%E5%8E%9F%E5%88%99/" class="article-date">
  <time class="dt-published" datetime="2023-02-10T06:26:44.279Z" itemprop="datePublished">2023-02-10</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/02/10/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F---%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E5%85%AD%E5%A4%A7%E5%8E%9F%E5%88%99/">设计模式---面向对象六大原则</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="设计模式—面向对象六大原则"><a href="#设计模式—面向对象六大原则" class="headerlink" title="设计模式—面向对象六大原则"></a>设计模式—面向对象六大原则</h1><h2 id="单一职责原则"><a href="#单一职责原则" class="headerlink" title="单一职责原则"></a>单一职责原则</h2><h2 id="开闭原则"><a href="#开闭原则" class="headerlink" title="开闭原则"></a>开闭原则</h2><h2 id="里氏替换"><a href="#里氏替换" class="headerlink" title="里氏替换"></a>里氏替换</h2><p>里氏代换原则是实现开闭原则的重要方式之一，由于使用基类对象的地方都可以使用子类对象，因此在程序中尽量使用基类类型来对对象进行定义，而在运行时再确定其子类类型，用子类对象来替换父类对象。</p>
<p>在程序中尽量使用基类类型来对对象进行定义，而在运行时再确定其子类类型，用子类对象来替换父类对象</p>
<p>感觉是这个意思吧，父类已经实现的方便，子类尽量不要去重写，子类可以去实现父类里没有实现的方法？</p>
<p>重写虚方法才会有多态，重写非虚方法对于面向接口编程意义不大，所以理解里氏原则，得以面向接口编程作思考…</p>
<p>JAVA中，多态是不是违背了里氏替换原则？？ 里氏替换原则要求子类避免重写父类方法，而多态的条件之一却是要求子类重写父类的方法。所以，我搞不懂里氏替换原则与继承，多态之间的关系。求大神解答，初学小弟跪拜。</p>
<p>LSP的原定义比较复杂，我们一般对里氏替换原则 LSP的解释为：子类对象能够替换父类对象，而程序逻辑不变。里氏替换原则有至少以下两种含义：</p>
<p>里氏替换原则是针对继承而言的，如果继承是为了实现代码重用，也就是为了共享方法，那么共享的父类方法就应该保持不变，不能被子类重新定义。子类只能通过新添加方法来扩展功能，父类和子类都可以实例化，而子类继承的方法和父类是一样的，父类调用方法的地方，子类也可以调用同一个继承得来的，逻辑和父类一致的方法，这时用子类对象将父类对象替换掉时，当然逻辑一致，相安无事。 如果继承的目的是为了多态，而多态的前提就是子类覆盖并重新定义父类的方法，为了符合LSP，我们应该将父类定义为抽象类，并定义抽象方法，让子类重新定义这些方法，当父类是抽象类时，父类就是不能实例化，所以也不存在可实例化的父类对象在程序里。也就不存在子类替换父类实例（根本不存在父类实例了）时逻辑不一致的可能。 不符合LSP的最常见的情况是，父类和子类都是可实例化的非抽象类，且父类的方法被子类重新定义，这一类的实现继承会造成父类和子类间的强耦合，也就是实际上并不相关的属性和方法牵强附会在一起，不利于程序扩展和维护。</p>
<p>如何符合LSP？总结一句话 —— 就是尽量不要从可实例化的父类中继承，而是要使用基于抽象类和接口的继承。</p>
<p>说的很透彻了。说白了，就是大家都基于抽象去编程，而不要基于具体。这样也就可以实现：对扩展（基于抽象）是开放的，对变更（基于具体）是禁止的。</p>
<p>里氏转换原则要求子类从抽象继承而不是从具体继承，如果从抽象继承，子类必然要重写父类方法。因此里氏转换原则和多态是相辅相成的！至于你说的第一条没有听说过。</p>
<p>刚才看了几篇文章，作者说的是，里氏转换原则要避免重写父类的非抽象方法，而多态的实现是通过重写抽象方法实现的，所以并不冲突。</p>
<p>不违反里氏替换的多态：重写父类的抽象方法</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/02/10/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F---%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E5%85%AD%E5%A4%A7%E5%8E%9F%E5%88%99/" data-id="cldy5bogo000fh0w9g70zd4p2" data-title="设计模式---面向对象六大原则" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-hello-world" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/02/10/hello-world/" class="article-date">
  <time class="dt-published" datetime="2023-02-10T06:04:46.956Z" itemprop="datePublished">2023-02-10</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/02/10/hello-world/">Hello World</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>Welcome to <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a target="_blank" rel="noopener" href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a target="_blank" rel="noopener" href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a target="_blank" rel="noopener" href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/02/10/hello-world/" data-id="cldy4lm7n00002sw9gk8beltp" data-title="Hello World" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-八皇后问题" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/10/25/%E5%85%AB%E7%9A%87%E5%90%8E%E9%97%AE%E9%A2%98/" class="article-date">
  <time class="dt-published" datetime="2022-10-25T07:30:16.000Z" itemprop="datePublished">2022-10-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/10/25/%E5%85%AB%E7%9A%87%E5%90%8E%E9%97%AE%E9%A2%98/">eight queens</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="八皇后问题"><a href="#八皇后问题" class="headerlink" title="八皇后问题"></a>八皇后问题</h1><h3 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h3><p>在8×8格的<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E5%9B%BD%E9%99%85%E8%B1%A1%E6%A3%8B/80888?fromModule=lemma_inlink">国际象棋</a>上摆放8个<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E7%9A%87%E5%90%8E/15860305?fromModule=lemma_inlink">皇后</a>，使其不能互相攻击，即任意两个皇后都不能处于同一行、同一列或同一<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E6%96%9C%E7%BA%BF/8546925?fromModule=lemma_inlink">斜线</a>上，问有多少种摆法。</p>
<h3 id="实现如下"><a href="#实现如下" class="headerlink" title="实现如下"></a>实现如下</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">int</span> arr[<span class="number">10</span>][<span class="number">10</span>];</span><br><span class="line"><span class="type">int</span> checkColumn[<span class="number">10</span>], checkL2R[<span class="number">20</span>], checkR2L[<span class="number">20</span>];</span><br><span class="line"><span class="type">int</span> js = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">dfs</span><span class="params">(<span class="type">int</span> arr[<span class="number">10</span>][<span class="number">10</span>], <span class="type">int</span> row)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">dfs</span>(arr, <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">dfs</span><span class="params">(<span class="type">int</span> arr[<span class="number">10</span>][<span class="number">10</span>], <span class="type">int</span> row)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (row == <span class="number">9</span>) &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;*******&quot;</span> &lt;&lt; js &lt;&lt; <span class="string">&quot;*******&quot;</span> &lt;&lt; endl;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">8</span>; ++i) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">1</span>; j &lt;= <span class="number">8</span>; ++j) &#123;</span><br><span class="line">                cout &lt;&lt; arr[i][j] &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            cout &lt;&lt; endl;</span><br><span class="line">        &#125;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;****************&quot;</span> &lt;&lt; endl;</span><br><span class="line">        cout &lt;&lt; endl;</span><br><span class="line">        js++;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">8</span>; ++i) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!checkColumn[i] &amp;&amp; !checkL2R[i - row + <span class="number">10</span>] &amp;&amp; !checkR2L[i + row]) &#123;</span><br><span class="line">            checkColumn[i] = <span class="number">1</span>;</span><br><span class="line">            checkL2R[i - row + <span class="number">10</span>] = <span class="number">1</span>;</span><br><span class="line">            checkR2L[i + row] = <span class="number">1</span>;</span><br><span class="line">            arr[row][i] = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">            <span class="built_in">dfs</span>(arr, row + <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">            arr[row][i] = <span class="number">0</span>;</span><br><span class="line">            checkColumn[i] = <span class="number">0</span>;</span><br><span class="line">            checkL2R[i - row + <span class="number">10</span>] = <span class="number">0</span>;</span><br><span class="line">            checkR2L[i + row] = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2022/10/25/%E5%85%AB%E7%9A%87%E5%90%8E%E9%97%AE%E9%A2%98/" data-id="cldy5bogf0008h0w9ap3pazxb" data-title="eight queens" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-适配的一些问题" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/10/25/%E9%80%82%E9%85%8D%E7%9A%84%E4%B8%80%E4%BA%9B%E9%97%AE%E9%A2%98/" class="article-date">
  <time class="dt-published" datetime="2022-10-25T07:30:16.000Z" itemprop="datePublished">2022-10-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
<div class="article-gallery">
  <div class="article-gallery-photos">
    
      <a class="article-gallery-img fancybox" target="_blank" href="http://mail.stud.tjut.edu.cn/static/mimg/o/domain/202210131830/index/img/icon-dashi.png" rel="gallery_cldy5bogo000gh0w95wt69i9c noopener">
        <img src="http://mail.stud.tjut.edu.cn/static/mimg/o/domain/202210131830/index/img/icon-dashi.png" itemprop="image">
      </a>
    
  </div>
</div>

    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/10/25/%E9%80%82%E9%85%8D%E7%9A%84%E4%B8%80%E4%BA%9B%E9%97%AE%E9%A2%98/">适配的一些问题</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="适配的一些问题"><a href="#适配的一些问题" class="headerlink" title="适配的一些问题"></a>适配的一些问题</h1><h2 id="分辨率、dpi、dp、density"><a href="#分辨率、dpi、dp、density" class="headerlink" title="分辨率、dpi、dp、density"></a>分辨率、dpi、dp、density</h2><h3 id="分辨率"><a href="#分辨率" class="headerlink" title="分辨率"></a>分辨率</h3><p>320 * 160: 	即, 屏幕上有320 * 160个像素点</p>
<h3 id="dpi"><a href="#dpi" class="headerlink" title="dpi"></a>dpi</h3><p>每英寸下像素点的个数 : 对角线像素点数 &#x2F; 对角线英寸数</p>
<h3 id="density"><a href="#density" class="headerlink" title="density"></a>density</h3><p>dpi &#x2F; 160 </p>
<h2 id="横竖屏切换导致的生命周期变化"><a href="#横竖屏切换导致的生命周期变化" class="headerlink" title="横竖屏切换导致的生命周期变化"></a>横竖屏切换导致的生命周期变化</h2><p>android:configChanges 配置的属性会被代码中的onConfigurationChanged方法监听到, 不做系统默认响应方式</p>
<p>比如设置orientation|screenSize 属性后, 在屏幕方向变化和屏幕大小变化时不会执行默认的重建activity操作, 而是在onConfigurationChanged中监听到该变化后, 手动处理或者忽略</p>
<h2 id="density变化"><a href="#density变化" class="headerlink" title="density变化"></a>density变化</h2><p>三星 系统中锁定竖屏后, 横屏转竖屏导致density变化, 在onCreate时数值正常,  但view显示前打印density发现不正常, 导致UI失配</p>
<p>经过debug后, 发现density在建立activity时被修改多次, 无法确定是何处修改导致变化,  怀疑是autoSize库导致</p>
<p>最终解决方案是在activity的onCreate方法中记录density值, 并在调用前对density赋值</p>
<h2 id="fitsSystemWindows-x3D-true"><a href="#fitsSystemWindows-x3D-true" class="headerlink" title="fitsSystemWindows &#x3D; true"></a>fitsSystemWindows &#x3D; true</h2><p>导致设定view的y异常, 表现为, 向下偏移一个状态栏高度</p>
<h2 id="recyclerView-中加载-match-parent-的图片显示显示不全"><a href="#recyclerView-中加载-match-parent-的图片显示显示不全" class="headerlink" title="recyclerView 中加载 match_parent 的图片显示显示不全"></a>recyclerView 中加载 match_parent 的图片显示显示不全</h2><p>此时图片高度会默认为屏幕高度, 大于屏幕高度的图片显示不全</p>
<h2 id="图片按比例缩放"><a href="#图片按比例缩放" class="headerlink" title="图片按比例缩放"></a>图片按比例缩放</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">android:layout_width=&quot;match_parent&quot;</span><br><span class="line">android:layout_height=&quot;wrap_content&quot;</span><br><span class="line">android:adjustViewBounds=&quot;true&quot;</span><br></pre></td></tr></table></figure>






      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2022/10/25/%E9%80%82%E9%85%8D%E7%9A%84%E4%B8%80%E4%BA%9B%E9%97%AE%E9%A2%98/" data-id="cldy5bogo000gh0w95wt69i9c" data-title="适配的一些问题" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="page-number current">2</span>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/02/">February 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/10/">October 2022</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2023/02/10/%E5%BC%80%E5%8F%91%E7%9A%84%E9%81%87%E5%88%B0%E7%9A%84bug/">开发的遇到的bug</a>
          </li>
        
          <li>
            <a href="/2023/02/10/%E5%85%B3%E4%BA%8Eitem%E7%82%B9%E5%87%BB%E4%BA%8B%E4%BB%B6%E5%A4%8D%E7%94%A8%E7%9A%84%E9%97%AE%E9%A2%98/">关于item点击事件复用的问题</a>
          </li>
        
          <li>
            <a href="/2023/02/10/%E5%85%B3%E4%BA%8EAndroid-View%E7%BB%98%E5%88%B6%E7%9A%84%E4%B8%80%E4%BA%9B%E9%97%AE%E9%A2%98/">关于Android View绘制的一些问题</a>
          </li>
        
          <li>
            <a href="/2023/02/10/%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/">单例模式</a>
          </li>
        
          <li>
            <a href="/2023/02/10/UML%E7%B1%BB%E5%9B%BE%E5%92%8C%E7%B1%BB%E4%B8%8E%E7%B1%BB%E4%B9%8B%E9%97%B4%E7%9A%84%E5%85%B3%E7%B3%BB/">UML类图和类与类之间的关系</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2023 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>